/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/page-flip";
exports.ids = ["vendor-chunks/page-flip"];
exports.modules = {

/***/ "(ssr)/./node_modules/page-flip/dist/js/page-flip.browser.js":
/*!*************************************************************!*\
  !*** ./node_modules/page-flip/dist/js/page-flip.browser.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("!function(t,e){ true?e(exports):0}(this,(function(t){\"use strict\";class e{constructor(t,e){this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=e,this.nowDrawingDensity=this.createdDensity,this.render=t}setDensity(t){this.createdDensity=t,this.nowDrawingDensity=t}setDrawingDensity(t){this.nowDrawingDensity=t}setPosition(t){this.state.position=t}setAngle(t){this.state.angle=t}setArea(t){this.state.area=t}setHardDrawingAngle(t){this.state.hardDrawingAngle=t}setHardAngle(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}setOrientation(t){this.orientation=t}getDrawingDensity(){return this.nowDrawingDensity}getDensity(){return this.createdDensity}getHardAngle(){return this.state.hardAngle}}class i extends e{constructor(t,e,i){super(t,i),this.image=null,this.isLoad=!1,this.loadingAngle=0,this.image=new Image,this.image.src=e}draw(t){const e=this.render.getContext(),i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;e.save(),e.translate(i.x,i.y),e.beginPath();for(let t of this.state.area)null!==t&&(t=this.render.convertToGlobal(t),e.lineTo(t.x-i.x,t.y-i.y));e.rotate(this.state.angle),e.clip(),this.isLoad?e.drawImage(this.image,0,0,s,n):this.drawLoader(e,{x:0,y:0},s,n),e.restore()}simpleDraw(t){const e=this.render.getRect(),i=this.render.getContext(),s=e.pageWidth,n=e.height,h=1===t?e.left+e.pageWidth:e.left,r=e.top;this.isLoad?i.drawImage(this.image,h,r,s,n):this.drawLoader(i,{x:h,y:r},s,n)}drawLoader(t,e,i,s){t.beginPath(),t.strokeStyle=\"rgb(200, 200, 200)\",t.fillStyle=\"rgb(255, 255, 255)\",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,s-1),t.stroke(),t.fill();const n={x:e.x+i/2,y:e.y+s/2};t.beginPath(),t.lineWidth=10,t.arc(n.x,n.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}load(){this.isLoad||(this.image.onload=()=>{this.isLoad=!0})}newTemporaryCopy(){return this}getTemporaryCopy(){return this}hideTemporaryCopy(){}}class s{constructor(t,e){this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=e,this.app=t,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}destroy(){this.pages=[]}createSpread(){this.landscapeSpread=[],this.portraitSpread=[];for(let t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);let t=0;this.isShowCover&&(this.pages[0].setDensity(\"hard\"),this.landscapeSpread.push([t]),t++);for(let e=t;e<this.pages.length;e+=2)e<this.pages.length-1?this.landscapeSpread.push([e,e+1]):(this.landscapeSpread.push([e]),this.pages[e].setDensity(\"hard\"))}getSpread(){return\"landscape\"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}getSpreadIndexByPage(t){const e=this.getSpread();for(let i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}getPageCount(){return this.pages.length}getPages(){return this.pages}getPage(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error(\"Invalid page number\")}nextBy(t){const e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}prevBy(t){const e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}getFlippingPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}}getBottomPage(t){const e=this.currentSpreadIndex;if(\"portrait\"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];{const i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}}showNext(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}showPrev(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}getCurrentPageIndex(){return this.currentPageIndex}show(t=null){if(null===t&&(t=this.currentPageIndex),t<0||t>=this.pages.length)return;const e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}getCurrentSpreadIndex(){return this.currentSpreadIndex}setCurrentSpreadIndex(t){if(!(t>=0&&t<this.getSpread().length))throw new Error(\"Invalid page\");this.currentSpreadIndex=t}showSpread(){const t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):\"landscape\"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}class n extends s{constructor(t,e,i){super(t,e),this.imagesHref=i}load(){for(const t of this.imagesHref){const e=new i(this.render,t,\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class h{static GetDistanceBetweenTwoPoint(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}static GetSegmentLength(t){return h.GetDistanceBetweenTwoPoint(t[0],t[1])}static GetAngleBetweenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x;return Math.acos((i*s+n*h)/(Math.sqrt(i*i+n*n)*Math.sqrt(s*s+h*h)))}static PointInRect(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}static GetRotatedPoint(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}static LimitPointToCircle(t,e,i){if(h.GetDistanceBetweenTwoPoint(t,i)<=e)return i;const s=t.x,n=t.y,r=i.x,o=i.y;let a=Math.sqrt(Math.pow(e,2)*Math.pow(s-r,2)/(Math.pow(s-r,2)+Math.pow(n-o,2)))+s;i.x<0&&(a*=-1);let g=(a-s)*(n-o)/(s-r)+n;return s-r+n===0&&(g=e),{x:a,y:g}}static GetIntersectBetweenTwoSegment(t,e,i){return h.PointInRect(t,h.GetIntersectBeetwenTwoLine(e,i))}static GetIntersectBeetwenTwoLine(t,e){const i=t[0].y-t[1].y,s=e[0].y-e[1].y,n=t[1].x-t[0].x,h=e[1].x-e[0].x,r=t[0].x*t[1].y-t[1].x*t[0].y,o=e[0].x*e[1].y-e[1].x*e[0].y,a=i*o-s*r,g=n*o-h*r,l=-(r*h-o*n)/(i*h-s*n),d=-(i*o-s*r)/(i*h-s*n);if(isFinite(l)&&isFinite(d))return{x:l,y:d};if(Math.abs(a-g)<.1)throw new Error(\"Segment included\");return null}static GetCordsFromTwoPoint(t,e){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y),n=Math.max(i,s),h=[t];function r(t,e,i,s,n){return e>t?t+n*(i/s):e<t?t-n*(i/s):t}for(let o=1;o<=n;o+=1)h.push({x:r(t.x,e.x,i,n,o),y:r(t.y,e.y,s,n,o)});return h}}class r extends e{constructor(t,e,i){super(t,i),this.copiedElement=null,this.temporaryCopy=null,this.isLoad=!1,this.element=e,this.element.classList.add(\"stf__item\"),this.element.classList.add(\"--\"+i)}newTemporaryCopy(){return\"hard\"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new r(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}getTemporaryCopy(){return this.temporaryCopy}hideTemporaryCopy(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}draw(t){const e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),s=this.render.getRect().pageWidth,n=this.render.getRect().height;this.element.classList.remove(\"--simple\");const h=`\\n            display: block;\\n            z-index: ${this.element.style.zIndex};\\n            left: 0;\\n            top: 0;\\n            width: ${s}px;\\n            height: ${n}px;\\n        `;\"hard\"===e?this.drawHard(h):this.drawSoft(i,h)}drawHard(t=\"\"){const e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,s=t+\"\\n                backface-visibility: hidden;\\n                -webkit-backface-visibility: hidden;\\n                clip-path: none;\\n                -webkit-clip-path: none;\\n            \"+(0===this.orientation?`transform-origin: ${this.render.getRect().pageWidth}px 0; \\n                   transform: translate3d(0, 0, 0) rotateY(${i}deg);`:`transform-origin: 0 0; \\n                   transform: translate3d(${e}px, 0, 0) rotateY(${i}deg);`);this.element.style.cssText=s}drawSoft(t,e=\"\"){let i=\"polygon( \";for(const t of this.state.area)if(null!==t){let e=1===this.render.getDirection()?{x:-t.x+this.state.position.x,y:t.y-this.state.position.y}:{x:t.x-this.state.position.x,y:t.y-this.state.position.y};e=h.GetRotatedPoint(e,{x:0,y:0},this.state.angle),i+=e.x+\"px \"+e.y+\"px, \"}i=i.slice(0,-2),i+=\")\";const s=e+`transform-origin: 0 0; clip-path: ${i}; -webkit-clip-path: ${i};`+(this.render.isSafari()&&0===this.state.angle?`transform: translate(${t.x}px, ${t.y}px);`:`transform: translate3d(${t.x}px, ${t.y}px, 0) rotate(${this.state.angle}rad);`);this.element.style.cssText=s}simpleDraw(t){const e=this.render.getRect(),i=e.pageWidth,s=e.height,n=1===t?e.left+e.pageWidth:e.left,h=e.top;this.element.classList.add(\"--simple\"),this.element.style.cssText=`\\n            position: absolute; \\n            display: block; \\n            height: ${s}px; \\n            left: ${n}px; \\n            top: ${h}px; \\n            width: ${i}px; \\n            z-index: ${this.render.getSettings().startZIndex+1};`}getElement(){return this.element}load(){this.isLoad=!0}setOrientation(t){super.setOrientation(t),this.element.classList.remove(\"--left\",\"--right\"),this.element.classList.add(1===t?\"--right\":\"--left\")}setDrawingDensity(t){this.element.classList.remove(\"--soft\",\"--hard\"),this.element.classList.add(\"--\"+t),super.setDrawingDensity(t)}}class o extends s{constructor(t,e,i,s){super(t,e),this.element=i,this.pagesElement=s}load(){for(const t of this.pagesElement){const e=new r(this.render,t,\"hard\"===t.dataset.density?\"hard\":\"soft\");e.load(),this.pages.push(e)}this.createSpread()}}class a{constructor(t,e,i,s){this.direction=t,this.corner=e,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(i,10),this.pageHeight=parseInt(s,10)}calc(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}getFlippingClipArea(){const t=[];let e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||\"bottom\"===this.corner)&&t.push(this.rect.bottomLeft),t}getBottomClipArea(){const t=[];return t.push(this.topIntersectPoint),\"top\"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?h.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):\"top\"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}getAngle(){return 0===this.direction?-this.angle:this.angle}getRect(){return this.rect}getPosition(){return this.position}getActiveCorner(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}getDirection(){return this.direction}getFlippingProgress(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}getCorner(){return this.corner}getBottomPagePosition(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}getShadowStartPoint(){return\"top\"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}getShadowAngle(){const t=h.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}calcAngleAndPosition(t){let e=t;if(this.updateAngleAndGeometry(e),e=\"top\"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error(\"Point is too small\");return e}updateAngleAndGeometry(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}calculateAngle(t){const e=this.pageWidth-t.x+1,i=\"bottom\"===this.corner?this.pageHeight-t.y:t.y;let s=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(s=-s);const n=Math.PI-s;if(!isFinite(s)||n>=0&&n<.003)throw new Error(\"The G point is too small\");return\"bottom\"===this.corner&&(s=-s),s}getPageRect(t){return\"top\"===this.corner?this.getRectFromBasePoint([{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}],t):this.getRectFromBasePoint([{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}getRectFromBasePoint(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}getRotatedPoint(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}calculateIntersectPoint(t){const e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};\"top\"===this.corner?(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=h.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}checkPositionAtCenterLine(t,e,i){let s=t;const n=h.LimitPointToCircle(e,this.pageWidth,s);s!==n&&(s=n,this.updateAngleAndGeometry(s));const r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2));let o=this.rect.bottomRight,a=this.rect.topLeft;if(\"bottom\"===this.corner&&(o=this.rect.topRight,a=this.rect.bottomLeft),o.x<=0){const t=h.LimitPointToCircle(i,r,a);t!==s&&(s=t,this.updateAngleAndGeometry(s))}return s}getSegmentToShadowLine(){const t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}class g{constructor(t,e){this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state=\"read\",this.render=t,this.app=e}fold(t){this.setState(\"user_fold\"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}flip(t){if(this.app.getSettings().disableFlipByClick&&!this.isPointOnCorners(t))return;if(null!==this.calc&&this.render.finishAnimation(),!this.start(t))return;const e=this.getBoundsRect();this.setState(\"flipping\");const i=e.height/10,s=\"bottom\"===this.calc.getCorner()?e.height-i:i,n=\"bottom\"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:s}),this.animateFlippingTo({x:e.pageWidth-i,y:s},{x:-e.pageWidth,y:n},!0)}start(t){this.reset();const e=this.render.convertToBook(t),i=this.getBoundsRect(),s=this.getDirectionByPoint(e),n=e.y>=i.height/2?\"bottom\":\"top\";if(!this.checkDirection(s))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(s),this.bottomPage=this.app.getPageCollection().getBottomPage(s),\"landscape\"===this.render.getOrientation())if(1===s){const t=this.app.getPageCollection().nextBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}else{const t=this.app.getPageCollection().prevBy(this.flippingPage);null!==t&&this.flippingPage.getDensity()!==t.getDensity()&&(this.flippingPage.setDrawingDensity(\"hard\"),t.setDrawingDensity(\"hard\"))}return this.render.setDirection(s),this.calc=new a(s,n,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}do(t){if(null!==this.calc&&this.calc.calc(t)){const t=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*t)/100):this.flippingPage.setHardAngle(-90*(200-2*t)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),t,this.calc.getDirection())}}flipToPage(t,e){const i=this.app.getPageCollection().getCurrentSpreadIndex(),s=this.app.getPageCollection().getSpreadIndexByPage(t);try{s>i&&(this.app.getPageCollection().setCurrentSpreadIndex(s-1),this.flipNext(e)),s<i&&(this.app.getPageCollection().setCurrentSpreadIndex(s+1),this.flipPrev(e))}catch(t){}}flipNext(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:\"top\"===t?1:this.render.getRect().height-2})}flipPrev(t){this.flip({x:10,y:\"top\"===t?1:this.render.getRect().height-2})}stopMove(){if(null===this.calc)return;const t=this.calc.getPosition(),e=this.getBoundsRect(),i=\"bottom\"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}showCorner(t){if(!this.checkState(\"read\",\"fold_corner\"))return;const e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState(\"fold_corner\"),this.calc.calc({x:i-1,y:1});const s=50,n=\"bottom\"===this.calc.getCorner()?e.height-1:1,h=\"bottom\"===this.calc.getCorner()?e.height-s:s;this.animateFlippingTo({x:i-1,y:n},{x:i-s,y:h},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState(\"read\"),this.render.finishAnimation(),this.stopMove()}animateFlippingTo(t,e,i,s=!0){const n=h.GetCordsFromTwoPoint(t,e),r=[];for(const t of n)r.push(()=>this.do(t));const o=this.getAnimationDuration(n.length);this.render.startAnimation(r,o,()=>{this.calc&&(i&&(1===this.calc.getDirection()?this.app.turnToPrevPage():this.app.turnToNextPage()),s&&(this.render.setBottomPage(null),this.render.setFlippingPage(null),this.render.clearShadow(),this.setState(\"read\"),this.reset()))})}getCalculation(){return this.calc}getState(){return this.state}setState(t){this.state!==t&&(this.app.updateState(t),this.state=t)}getDirectionByPoint(t){const e=this.getBoundsRect();if(\"portrait\"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}getAnimationDuration(t){const e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}checkDirection(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}reset(){this.calc=null,this.flippingPage=null,this.bottomPage=null}getBoundsRect(){return this.render.getRect()}checkState(...t){for(const e of t)if(this.state===e)return!0;return!1}isPointOnCorners(t){const e=this.getBoundsRect(),i=e.pageWidth,s=Math.sqrt(Math.pow(i,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<s||n.x>e.width-s)&&(n.y<s||n.y>e.height-s)}}class l{constructor(t,e){this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=e,this.app=t;const i=new RegExp(\"Version\\\\/[\\\\d\\\\.]+.*Safari/\");this.safari=null!==i.exec(window.navigator.userAgent)}render(t){if(null!==this.animation){const e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}start(){this.update();const t=e=>{this.render(e),requestAnimationFrame(t)};requestAnimationFrame(t)}startAnimation(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}finishAnimation(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}update(){this.boundsRect=null;const t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}calculateBoundsRect(){let t=\"landscape\";const e=this.getBlockWidth(),i=e/2,s=this.getBlockHeight()/2,n=this.setting.width/this.setting.height;let h=this.setting.width,r=this.setting.height,o=i-h;return\"stretch\"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t=\"portrait\"),h=\"portrait\"===t?this.getBlockWidth():this.getBlockWidth()/2,h>this.setting.maxWidth&&(h=this.setting.maxWidth),r=h/n,r>this.getBlockHeight()&&(r=this.getBlockHeight(),h=r*n),o=\"portrait\"===t?i-h/2-h:i-h):e<2*h&&this.app.getSettings().usePortrait&&(t=\"portrait\",o=i-h/2-h),this.boundsRect={left:o,top:s-r/2,width:2*h,height:r,pageWidth:h},t}setShadowData(t,e,i,s){if(!this.app.getSettings().drawShadow)return;const n=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*n/100/100,direction:s,progress:2*i}}clearShadow(){this.shadow=null}getBlockWidth(){return this.app.getUI().getDistElement().offsetWidth}getBlockHeight(){return this.app.getUI().getDistElement().offsetHeight}getDirection(){return this.direction}getRect(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}getSettings(){return this.app.getSettings()}getOrientation(){return this.orientation}setPageRect(t){this.pageRect=t}setDirection(t){this.direction=t}setRightPage(t){null!==t&&t.setOrientation(1),this.rightPage=t}setLeftPage(t){null!==t&&t.setOrientation(0),this.leftPage=t}setBottomPage(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}setFlippingPage(t){null!==t&&t.setOrientation(0===this.direction&&\"portrait\"!==this.orientation?0:1),this.flippingPage=t}convertToBook(t){const e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}isSafari(){return this.safari}convertToPage(t,e){e||(e=this.direction);const i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}convertToGlobal(t,e){if(e||(e=this.direction),null==t)return null;const i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}convertRectToGlobal(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}class d extends l{constructor(t,e,i){super(t,e),this.canvas=i,this.ctx=i.getContext(\"2d\")}getContext(){return this.ctx}reload(){}drawFrame(){this.clear(),\"portrait\"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());const t=this.getRect();\"portrait\"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}drawBookShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);const i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);const s=this.ctx.createLinearGradient(0,0,e,0);s.addColorStop(0,\"rgba(0, 0, 0, 0)\"),s.addColorStop(.4,\"rgba(0, 0, 0, 0.2)\"),s.addColorStop(.49,\"rgba(0, 0, 0, 0.1)\"),s.addColorStop(.5,\"rgba(0, 0, 0, 0.5)\"),s.addColorStop(.51,\"rgba(0, 0, 0, 0.4)\"),s.addColorStop(1,\"rgba(0, 0, 0, 0)\"),this.ctx.clip(),this.ctx.fillStyle=s,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}drawOuterShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),i.addColorStop(1,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,\"rgba(0, 0, 0, 0)\"),i.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}drawInnerShadow(){const t=this.getRect();this.ctx.save(),this.ctx.beginPath();const e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);const s=3*this.shadow.width/4,n=this.ctx.createLinearGradient(0,0,s,0);0===this.shadow.direction?(this.ctx.translate(-s,-100),n.addColorStop(1,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.9,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.7,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(0,\"rgba(0, 0, 0, 0)\")):(this.ctx.translate(0,-100),n.addColorStop(0,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(.1,\"rgba(0, 0, 0, 0.05)\"),n.addColorStop(.3,\"rgba(0, 0, 0, \"+this.shadow.opacity+\")\"),n.addColorStop(1,\"rgba(0, 0, 0, 0)\")),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,s,2*t.height),this.ctx.restore()}clear(){this.ctx.fillStyle=\"white\",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}class p{constructor(t,e,i){this.touchPoint=null,this.swipeTimeout=250,this.onResize=()=>{this.update()},this.onMouseDown=t=>{if(this.checkTarget(t.target)){const e=this.getMousePos(t.clientX,t.clientY);this.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=t=>{if(this.checkTarget(t.target)&&t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.touchPoint={point:i,time:Date.now()},setTimeout(()=>{null!==this.touchPoint&&this.app.startUserTouch(i)},this.swipeTimeout),this.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userStop(e)},this.onMouseMove=t=>{const e=this.getMousePos(t.clientX,t.clientY);this.app.userMove(e,!1)},this.onTouchMove=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);this.app.getSettings().mobileScrollSupport?(null!==this.touchPoint&&(Math.abs(this.touchPoint.point.x-i.x)>10||\"read\"!==this.app.getState())&&t.cancelable&&this.app.userMove(i,!0),\"read\"!==this.app.getState()&&t.preventDefault()):this.app.userMove(i,!0)}},this.onTouchEnd=t=>{if(t.changedTouches.length>0){const e=t.changedTouches[0],i=this.getMousePos(e.clientX,e.clientY);let s=!1;if(null!==this.touchPoint){const t=i.x-this.touchPoint.point.x,e=Math.abs(i.y-this.touchPoint.point.y);Math.abs(t)>this.swipeDistance&&e<2*this.swipeDistance&&Date.now()-this.touchPoint.time<this.swipeTimeout&&(t>0?this.app.flipPrev(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"):this.app.flipNext(this.touchPoint.point.y<this.app.getRender().getRect().height/2?\"top\":\"bottom\"),s=!0),this.touchPoint=null}this.app.userStop(i,s)}},this.parentElement=t,t.classList.add(\"stf__parent\"),t.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__wrapper\"></div>'),this.wrapper=t.querySelector(\".stf__wrapper\"),this.app=e;const s=this.app.getSettings().usePortrait?1:2;t.style.minWidth=i.minWidth*s+\"px\",t.style.minHeight=i.minHeight+\"px\",\"fixed\"===i.size&&(t.style.minWidth=i.width*s+\"px\",t.style.minHeight=i.height+\"px\"),i.autoSize&&(t.style.width=\"100%\",t.style.maxWidth=2*i.maxWidth+\"px\"),t.style.display=\"block\",window.addEventListener(\"resize\",this.onResize,!1),this.swipeDistance=i.swipeDistance}destroy(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}getDistElement(){return this.distElement}getWrapper(){return this.wrapper}setOrientationStyle(t){this.wrapper.classList.remove(\"--portrait\",\"--landscape\"),\"portrait\"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+\"%\"),this.wrapper.classList.add(\"--portrait\")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+\"%\"),this.wrapper.classList.add(\"--landscape\")),this.update()}removeHandlers(){window.removeEventListener(\"resize\",this.onResize),this.distElement.removeEventListener(\"mousedown\",this.onMouseDown),this.distElement.removeEventListener(\"touchstart\",this.onTouchStart),window.removeEventListener(\"mousemove\",this.onMouseMove),window.removeEventListener(\"touchmove\",this.onTouchMove),window.removeEventListener(\"mouseup\",this.onMouseUp),window.removeEventListener(\"touchend\",this.onTouchEnd)}setHandlers(){window.addEventListener(\"resize\",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener(\"mousedown\",this.onMouseDown),this.distElement.addEventListener(\"touchstart\",this.onTouchStart),window.addEventListener(\"mousemove\",this.onMouseMove),window.addEventListener(\"touchmove\",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener(\"mouseup\",this.onMouseUp),window.addEventListener(\"touchend\",this.onTouchEnd))}getMousePos(t,e){const i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}checkTarget(t){return!this.app.getSettings().clickEventForward||![\"a\",\"button\"].includes(t.tagName.toLowerCase())}}class c extends p{constructor(t,e,i,s){super(t,e,i),this.wrapper.insertAdjacentHTML(\"afterbegin\",'<div class=\"stf__block\"></div>'),this.distElement=t.querySelector(\".stf__block\"),this.items=s;for(const t of s)this.distElement.appendChild(t);this.setHandlers()}clear(){for(const t of this.items)this.parentElement.appendChild(t)}updateItems(t){this.removeHandlers(),this.distElement.innerHTML=\"\";for(const e of t)this.distElement.appendChild(e);this.items=t,this.setHandlers()}update(){this.app.getRender().update()}}class u extends p{constructor(t,e,i){super(t,e,i),this.wrapper.innerHTML='<canvas class=\"stf__canvas\"></canvas>',this.canvas=t.querySelectorAll(\"canvas\")[0],this.distElement=this.canvas,this.resizeCanvas(),this.setHandlers()}resizeCanvas(){const t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue(\"width\"),10),i=parseInt(t.getPropertyValue(\"height\"),10);this.canvas.width=e,this.canvas.height=i}getCanvas(){return this.canvas}update(){this.resizeCanvas(),this.app.getRender().update()}}class w extends l{constructor(t,e,i){super(t,e),this.outerShadow=null,this.innerShadow=null,this.hardShadow=null,this.hardInnerShadow=null,this.element=i,this.createShadows()}createShadows(){this.element.insertAdjacentHTML(\"beforeend\",'<div class=\"stf__outerShadow\"></div>\\n             <div class=\"stf__innerShadow\"></div>\\n             <div class=\"stf__hardShadow\"></div>\\n             <div class=\"stf__hardInnerShadow\"></div>'),this.outerShadow=this.element.querySelector(\".stf__outerShadow\"),this.innerShadow=this.element.querySelector(\".stf__innerShadow\"),this.hardShadow=this.element.querySelector(\".stf__hardShadow\"),this.hardInnerShadow=this.element.querySelector(\".stf__hardInnerShadow\")}clearShadow(){super.clearShadow(),this.outerShadow.style.cssText=\"display: none\",this.innerShadow.style.cssText=\"display: none\",this.hardShadow.style.cssText=\"display: none\",this.hardInnerShadow.style.cssText=\"display: none\"}reload(){this.element.querySelector(\".stf__outerShadow\")||this.createShadows()}drawHardInnerShadow(){const t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress;let i=(100-e)*(2.5*t.pageWidth)/100+20;i>t.pageWidth&&(i=t.pageWidth);let s=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+5).toString(10)};\\n            width: ${i}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to right,\\n                rgba(0, 0, 0, ${this.shadow.opacity*e/100}) 5%,\\n                rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;s+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0);\":\"transform: translate3d(0, 0, 0) rotateY(180deg);\",this.hardInnerShadow.style.cssText=s}drawHardOuterShadow(){const t=this.getRect();let e=(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))*(2.5*t.pageWidth)/100+20;e>t.pageWidth&&(e=t.pageWidth);let i=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+4).toString(10)};\\n            width: ${e}px;\\n            height: ${t.height}px;\\n            background: linear-gradient(to left, rgba(0, 0, 0, ${this.shadow.opacity}) 5%, rgba(0, 0, 0, 0) 100%);\\n            left: ${t.left+t.width/2}px;\\n            transform-origin: 0 0;\\n        `;i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?\"transform: translate3d(0, 0, 0) rotateY(180deg);\":\"transform: translate3d(0, 0, 0);\",this.hardShadow.style.cssText=i}drawInnerShadow(){const t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,s=0===this.getDirection()?\"to left\":\"to right\",n=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,o=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];let a=\"polygon( \";for(const t of o){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:i,y:100},r),a+=e.x+\"px \"+e.y+\"px, \"}a=a.slice(0,-2),a+=\")\";const g=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${e}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${s},\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 5%,\\n                rgba(0, 0, 0, 0.05) 15%,\\n                rgba(0, 0, 0, ${this.shadow.opacity}) 35%,\\n                rgba(0, 0, 0, 0) 100%);\\n            transform-origin: ${i}px 100px;\\n            transform: translate3d(${n.x-i}px, ${n.y-100}px, 0) rotate(${r}rad);\\n            clip-path: ${a};\\n            -webkit-clip-path: ${a};\\n        `;this.innerShadow.style.cssText=g}drawOuterShadow(){const t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,s=1===this.getDirection()?this.shadow.width:0,n=0===this.getDirection()?\"to right\":\"to left\",r=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];let o=\"polygon( \";for(const t of r)if(null!==t){let e=1===this.getDirection()?{x:-t.x+this.shadow.pos.x,y:t.y-this.shadow.pos.y}:{x:t.x-this.shadow.pos.x,y:t.y-this.shadow.pos.y};e=h.GetRotatedPoint(e,{x:s,y:100},i),o+=e.x+\"px \"+e.y+\"px, \"}o=o.slice(0,-2),o+=\")\";const a=`\\n            display: block;\\n            z-index: ${(this.getSettings().startZIndex+10).toString(10)};\\n            width: ${this.shadow.width}px;\\n            height: ${2*t.height}px;\\n            background: linear-gradient(${n}, rgba(0, 0, 0, ${this.shadow.opacity}), rgba(0, 0, 0, 0));\\n            transform-origin: ${s}px 100px;\\n            transform: translate3d(${e.x-s}px, ${e.y-100}px, 0) rotate(${i}rad);\\n            clip-path: ${o};\\n            -webkit-clip-path: ${o};\\n        `;this.outerShadow.style.cssText=a}drawLeftPage(){\"portrait\"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}drawRightPage(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&\"hard\"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}drawBottomPage(){if(null===this.bottomPage)return;const t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;\"portrait\"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}drawFrame(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&(\"soft\"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}clear(){for(const t of this.app.getPageCollection().getPages())t!==this.leftPage&&t!==this.rightPage&&t!==this.flippingPage&&t!==this.bottomPage&&(t.getElement().style.cssText=\"display: none\"),t.getTemporaryCopy()!==this.flippingPage&&t.hideTemporaryCopy()}update(){super.update(),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}class x{constructor(){this._default={startPage:0,size:\"fixed\",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}getSettings(t){const e=this._default;if(Object.assign(e,t),\"stretch\"!==e.size&&\"fixed\"!==e.size)throw new Error('Invalid size type. Available only \"fixed\" and \"stretch\" value');if(e.width<=0||e.height<=0)throw new Error(\"Invalid width or height\");if(e.flippingTime<=0)throw new Error(\"Invalid flipping time\");return\"stretch\"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&\"undefined\"!=typeof document){var s=document.head||document.getElementsByTagName(\"head\")[0],n=document.createElement(\"style\");n.type=\"text/css\",\"top\"===i&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}(\".stf__parent {\\n  position: relative;\\n  display: block;\\n  box-sizing: border-box;\\n  transform: translateZ(0);\\n\\n  -ms-touch-action: pan-y;\\n  touch-action: pan-y;\\n}\\n\\n.sft__wrapper {\\n  position: relative;\\n  width: 100%;\\n  box-sizing: border-box;\\n}\\n\\n.stf__parent canvas {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__block {\\n  position: absolute;\\n  width: 100%;\\n  height: 100%;\\n  box-sizing: border-box;\\n  perspective: 2000px;\\n}\\n\\n.stf__item {\\n  display: none;\\n  position: absolute;\\n  transform-style: preserve-3d;\\n}\\n\\n.stf__outerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__innerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\\n\\n.stf__hardInnerShadow {\\n  position: absolute;\\n  left: 0;\\n  top: 0;\\n}\");t.PageFlip=class extends class{constructor(){this.events=new Map}on(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}off(t){this.events.delete(t)}trigger(t,e,i=null){if(this.events.has(t))for(const s of this.events.get(t))s({data:i,object:e})}}{constructor(t,e){super(),this.isUserTouch=!1,this.isUserMove=!1,this.setting=null,this.pages=null,this.setting=(new x).getSettings(e),this.block=t}destroy(){this.ui.destroy(),this.block.remove()}update(){this.render.update(),this.pages.show()}loadFromImages(t){this.ui=new u(this.block,this,this.setting);const e=this.ui.getCanvas();this.render=new d(this,this.setting,e),this.flipController=new g(this.render,this),this.pages=new n(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}loadFromHTML(t){this.ui=new c(this.block,this,this.setting,t),this.render=new w(this,this.setting,this.ui.getDistElement()),this.flipController=new g(this.render,this),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(()=>{this.ui.update(),this.trigger(\"init\",this,{page:this.setting.startPage,mode:this.render.getOrientation()})},1)}updateFromImages(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new n(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}updateFromHtml(t){const e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new o(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger(\"update\",this,{page:e,mode:this.render.getOrientation()})}clear(){this.pages.destroy(),this.ui.clear()}turnToPrevPage(){this.pages.showPrev()}turnToNextPage(){this.pages.showNext()}turnToPage(t){this.pages.show(t)}flipNext(t=\"top\"){this.flipController.flipNext(t)}flipPrev(t=\"top\"){this.flipController.flipPrev(t)}flip(t,e=\"top\"){this.flipController.flipToPage(t,e)}updateState(t){this.trigger(\"changeState\",this,t)}updatePageIndex(t){this.trigger(\"flip\",this,t)}updateOrientation(t){this.ui.setOrientationStyle(t),this.update(),this.trigger(\"changeOrientation\",this,t)}getPageCount(){return this.pages.getPageCount()}getCurrentPageIndex(){return this.pages.getCurrentPageIndex()}getPage(t){return this.pages.getPage(t)}getRender(){return this.render}getFlipController(){return this.flipController}getOrientation(){return this.render.getOrientation()}getBoundsRect(){return this.render.getRect()}getSettings(){return this.setting}getUI(){return this.ui}getState(){return this.flipController.getState()}getPageCollection(){return this.pages}startUserTouch(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}userMove(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&h.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}userStop(t,e=!1){this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}},Object.defineProperty(t,\"__esModule\",{value:!0})}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvcGFnZS1mbGlwL2Rpc3QvanMvcGFnZS1mbGlwLmJyb3dzZXIuanMiLCJtYXBwaW5ncyI6IkFBQUEsZUFBZSxLQUFvRCxZQUFZLENBQWdGLENBQUMsbUJBQW1CLGFBQWEsUUFBUSxpQkFBaUIsWUFBWSwwQkFBMEIsUUFBUSxnQ0FBZ0MsZ0ZBQWdGLGNBQWMsK0NBQStDLHFCQUFxQix5QkFBeUIsZUFBZSxzQkFBc0IsWUFBWSxtQkFBbUIsV0FBVyxrQkFBa0IsdUJBQXVCLDhCQUE4QixnQkFBZ0IscURBQXFELGtCQUFrQixtQkFBbUIsb0JBQW9CLDhCQUE4QixhQUFhLDJCQUEyQixlQUFlLDZCQUE2QixrQkFBa0IsbUJBQW1CLG9HQUFvRyxRQUFRLHFKQUFxSiw0Q0FBNEMsb0dBQW9HLG1HQUFtRyxRQUFRLGtCQUFrQixjQUFjLDRIQUE0SCwrREFBK0QsUUFBUSxNQUFNLG9CQUFvQixnSkFBZ0osU0FBUyxxQkFBcUIsbU1BQW1NLE9BQU8scUNBQXFDLGVBQWUsRUFBRSxtQkFBbUIsWUFBWSxtQkFBbUIsWUFBWSxzQkFBc0IsUUFBUSxpQkFBaUIsa05BQWtOLFVBQVUsY0FBYyxlQUFlLCtDQUErQyxZQUFZLG9CQUFvQixrQ0FBa0MsUUFBUSx3RkFBd0YsWUFBWSxvQkFBb0IsZ0lBQWdJLFlBQVksMEZBQTBGLHdCQUF3Qix5QkFBeUIsWUFBWSxXQUFXLHlDQUF5QyxZQUFZLGVBQWUseUJBQXlCLFdBQVcsa0JBQWtCLFdBQVcsa0RBQWtELHVDQUF1QyxVQUFVLDhCQUE4QixrREFBa0QsVUFBVSw4QkFBOEIsZ0NBQWdDLG1CQUFtQixnQ0FBZ0MsNEdBQTRHLDBEQUEwRCw4REFBOEQsaUJBQWlCLGdDQUFnQywyRkFBMkYsMERBQTBELDhFQUE4RSxXQUFXLCtGQUErRixXQUFXLHlFQUF5RSxzQkFBc0IsNkJBQTZCLGFBQWEsd0VBQXdFLHFDQUFxQyx3REFBd0Qsd0JBQXdCLCtCQUErQix5QkFBeUIsc0VBQXNFLDBCQUEwQixhQUFhLGtE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QUFzQixvQkFBb0IsMkRBQTJELGdCQUFnQixJQUFJLGlCQUFpQixrSUFBa0ksVUFBVSxzQ0FBc0MsU0FBUyx1Q0FBdUMsa0JBQWtCLDRDQUE0Qyw0QkFBNEIsc05BQXNOLDJDQUEyQyw4REFBOEQsRUFBRSxJQUFJLGdCQUFnQixvVEFBb1QsMkNBQTJDLDhEQUE4RCxFQUFFLElBQUksb0JBQW9CLHlDQUF5QywySEFBMkgseUNBQXlDLEVBQUUsa0JBQWtCLHlDQUF5QyxnTUFBZ00seUNBQXlDLEVBQUUsUUFBUSxxQ0FBcUMsaUJBQWlCLHNCQUFzQixpQkFBaUIsc0JBQXNCLGNBQWMsbUJBQW1CLGtCQUFrQixnQ0FBZ0Msa0JBQWtCLGdDQUFnQyxnQkFBZ0Isb0NBQW9DLGVBQWUsbUNBQW1DLG1CQUFtQiw0QkFBNEIscUJBQXFCLHNGQUFzRixlQUFlLGlDQUFpQyxzQkFBc0Isd0NBQXdDLFdBQVcsNkJBQTZCLFlBQVksbUJBQW1CLG9CQUFvQiwyQkFBMkIsaUJBQWlCLG9DQUFvQyxnQkFBZ0IsNkJBQTZCLGNBQWMsb0JBQW9CLFFBQVEsZUFBZSxXQUFXLHNDQUFzQyxvQkFBb0Isa0JBQWtCLGtCQUFrQiw0REFBNEQsY0FBYyw4TUFBOE0saUJBQWlCLHlIQUF5SCx1Q0FBdUMsU0FBUyxFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLy4vbm9kZV9tb2R1bGVzL3BhZ2UtZmxpcC9kaXN0L2pzL3BhZ2UtZmxpcC5icm93c2VyLmpzP2RkYzQiXSwic291cmNlc0NvbnRlbnQiOlsiIWZ1bmN0aW9uKHQsZSl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGU/ZShleHBvcnRzKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImV4cG9ydHNcIl0sZSk6ZSgodD10fHxzZWxmKS5TdD17fSl9KHRoaXMsKGZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO2NsYXNzIGV7Y29uc3RydWN0b3IodCxlKXt0aGlzLnN0YXRlPXthbmdsZTowLGFyZWE6W10scG9zaXRpb246e3g6MCx5OjB9LGhhcmRBbmdsZTowLGhhcmREcmF3aW5nQW5nbGU6MH0sdGhpcy5jcmVhdGVkRGVuc2l0eT1lLHRoaXMubm93RHJhd2luZ0RlbnNpdHk9dGhpcy5jcmVhdGVkRGVuc2l0eSx0aGlzLnJlbmRlcj10fXNldERlbnNpdHkodCl7dGhpcy5jcmVhdGVkRGVuc2l0eT10LHRoaXMubm93RHJhd2luZ0RlbnNpdHk9dH1zZXREcmF3aW5nRGVuc2l0eSh0KXt0aGlzLm5vd0RyYXdpbmdEZW5zaXR5PXR9c2V0UG9zaXRpb24odCl7dGhpcy5zdGF0ZS5wb3NpdGlvbj10fXNldEFuZ2xlKHQpe3RoaXMuc3RhdGUuYW5nbGU9dH1zZXRBcmVhKHQpe3RoaXMuc3RhdGUuYXJlYT10fXNldEhhcmREcmF3aW5nQW5nbGUodCl7dGhpcy5zdGF0ZS5oYXJkRHJhd2luZ0FuZ2xlPXR9c2V0SGFyZEFuZ2xlKHQpe3RoaXMuc3RhdGUuaGFyZEFuZ2xlPXQsdGhpcy5zdGF0ZS5oYXJkRHJhd2luZ0FuZ2xlPXR9c2V0T3JpZW50YXRpb24odCl7dGhpcy5vcmllbnRhdGlvbj10fWdldERyYXdpbmdEZW5zaXR5KCl7cmV0dXJuIHRoaXMubm93RHJhd2luZ0RlbnNpdHl9Z2V0RGVuc2l0eSgpe3JldHVybiB0aGlzLmNyZWF0ZWREZW5zaXR5fWdldEhhcmRBbmdsZSgpe3JldHVybiB0aGlzLnN0YXRlLmhhcmRBbmdsZX19Y2xhc3MgaSBleHRlbmRzIGV7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsaSksdGhpcy5pbWFnZT1udWxsLHRoaXMuaXNMb2FkPSExLHRoaXMubG9hZGluZ0FuZ2xlPTAsdGhpcy5pbWFnZT1uZXcgSW1hZ2UsdGhpcy5pbWFnZS5zcmM9ZX1kcmF3KHQpe2NvbnN0IGU9dGhpcy5yZW5kZXIuZ2V0Q29udGV4dCgpLGk9dGhpcy5yZW5kZXIuY29udmVydFRvR2xvYmFsKHRoaXMuc3RhdGUucG9zaXRpb24pLHM9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLnBhZ2VXaWR0aCxuPXRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQ7ZS5zYXZlKCksZS50cmFuc2xhdGUoaS54LGkueSksZS5iZWdpblBhdGgoKTtmb3IobGV0IHQgb2YgdGhpcy5zdGF0ZS5hcmVhKW51bGwhPT10JiYodD10aGlzLnJlbmRlci5jb252ZXJ0VG9HbG9iYWwodCksZS5saW5lVG8odC54LWkueCx0LnktaS55KSk7ZS5yb3RhdGUodGhpcy5zdGF0ZS5hbmdsZSksZS5jbGlwKCksdGhpcy5pc0xvYWQ/ZS5kcmF3SW1hZ2UodGhpcy5pbWFnZSwwLDAscyxuKTp0aGlzLmRyYXdMb2FkZXIoZSx7eDowLHk6MH0scyxuKSxlLnJlc3RvcmUoKX1zaW1wbGVEcmF3KHQpe2NvbnN0IGU9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLGk9dGhpcy5yZW5kZXIuZ2V0Q29udGV4dCgpLHM9ZS5wYWdlV2lkdGgsbj1lLmhlaWdodCxoPTE9PT10P2UubGVmdCtlLnBhZ2VXaWR0aDplLmxlZnQscj1lLnRvcDt0aGlzLmlzTG9hZD9pLmRyYXdJbWFnZSh0aGlzLmltYWdlLGgscixzLG4pOnRoaXMuZHJhd0xvYWRlcihpLHt4OmgseTpyfSxzLG4pfWRyYXdMb2FkZXIodCxlLGkscyl7dC5iZWdpblBhdGgoKSx0LnN0cm9rZVN0eWxlPVwicmdiKDIwMCwgMjAwLCAyMDApXCIsdC5maWxsU3R5bGU9XCJyZ2IoMjU1LCAyNTUsIDI1NSlcIix0LmxpbmVXaWR0aD0xLHQucmVjdChlLngrMSxlLnkrMSxpLTEscy0xKSx0LnN0cm9rZSgpLHQuZmlsbCgpO2NvbnN0IG49e3g6ZS54K2kvMix5OmUueStzLzJ9O3QuYmVnaW5QYXRoKCksdC5saW5lV2lkdGg9MTAsdC5hcmMobi54LG4ueSwyMCx0aGlzLmxvYWRpbmdBbmdsZSwzKk1hdGguUEkvMit0aGlzLmxvYWRpbmdBbmdsZSksdC5zdHJva2UoKSx0LmNsb3NlUGF0aCgpLHRoaXMubG9hZGluZ0FuZ2xlKz0uMDcsdGhpcy5sb2FkaW5nQW5nbGU+PTIqTWF0aC5QSSYmKHRoaXMubG9hZGluZ0FuZ2xlPTApfWxvYWQoKXt0aGlzLmlzTG9hZHx8KHRoaXMuaW1hZ2Uub25sb2FkPSgpPT57dGhpcy5pc0xvYWQ9ITB9KX1uZXdUZW1wb3JhcnlDb3B5KCl7cmV0dXJuIHRoaXN9Z2V0VGVtcG9yYXJ5Q29weSgpe3JldHVybiB0aGlzfWhpZGVUZW1wb3JhcnlDb3B5KCl7fX1jbGFzcyBze2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5wYWdlcz1bXSx0aGlzLmN1cnJlbnRQYWdlSW5kZXg9MCx0aGlzLmN1cnJlbnRTcHJlYWRJbmRleD0wLHRoaXMubGFuZHNjYXBlU3ByZWFkPVtdLHRoaXMucG9ydHJhaXRTcHJlYWQ9W10sdGhpcy5yZW5kZXI9ZSx0aGlzLmFwcD10LHRoaXMuY3VycmVudFBhZ2VJbmRleD0wLHRoaXMuaXNTaG93Q292ZXI9dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5zaG93Q292ZXJ9ZGVzdHJveSgpe3RoaXMucGFnZXM9W119Y3JlYXRlU3ByZWFkKCl7dGhpcy5sYW5kc2NhcGVTcHJlYWQ9W10sdGhpcy5wb3J0cmFpdFNwcmVhZD1bXTtmb3IobGV0IHQ9MDt0PHRoaXMucGFnZXMubGVuZ3RoO3QrKyl0aGlzLnBvcnRyYWl0U3ByZWFkLnB1c2goW3RdKTtsZXQgdD0wO3RoaXMuaXNTaG93Q292ZXImJih0aGlzLnBhZ2VzWzBdLnNldERlbnNpdHkoXCJoYXJkXCIpLHRoaXMubGFuZHNjYXBlU3ByZWFkLnB1c2goW3RdKSx0KyspO2ZvcihsZXQgZT10O2U8dGhpcy5wYWdlcy5sZW5ndGg7ZSs9MillPHRoaXMucGFnZXMubGVuZ3RoLTE/dGhpcy5sYW5kc2NhcGVTcHJlYWQucHVzaChbZSxlKzFdKToodGhpcy5sYW5kc2NhcGVTcHJlYWQucHVzaChbZV0pLHRoaXMucGFnZXNbZV0uc2V0RGVuc2l0eShcImhhcmRcIikpfWdldFNwcmVhZCgpe3JldHVyblwibGFuZHNjYXBlXCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpP3RoaXMubGFuZHNjYXBlU3ByZWFkOnRoaXMucG9ydHJhaXRTcHJlYWR9Z2V0U3ByZWFkSW5kZXhCeVBhZ2UodCl7Y29uc3QgZT10aGlzLmdldFNwcmVhZCgpO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKWlmKHQ9PT1lW2ldWzBdfHx0PT09ZVtpXVsxXSlyZXR1cm4gaTtyZXR1cm4gbnVsbH1nZXRQYWdlQ291bnQoKXtyZXR1cm4gdGhpcy5wYWdlcy5sZW5ndGh9Z2V0UGFnZXMoKXtyZXR1cm4gdGhpcy5wYWdlc31nZXRQYWdlKHQpe2lmKHQ+PTAmJnQ8dGhpcy5wYWdlcy5sZW5ndGgpcmV0dXJuIHRoaXMucGFnZXNbdF07dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYWdlIG51bWJlclwiKX1uZXh0QnkodCl7Y29uc3QgZT10aGlzLnBhZ2VzLmluZGV4T2YodCk7cmV0dXJuIGU8dGhpcy5wYWdlcy5sZW5ndGgtMT90aGlzLnBhZ2VzW2UrMV06bnVsbH1wcmV2QnkodCl7Y29uc3QgZT10aGlzLnBhZ2VzLmluZGV4T2YodCk7cmV0dXJuIGU+MD90aGlzLnBhZ2VzW2UtMV06bnVsbH1nZXRGbGlwcGluZ1BhZ2UodCl7Y29uc3QgZT10aGlzLmN1cnJlbnRTcHJlYWRJbmRleDtpZihcInBvcnRyYWl0XCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpKXJldHVybiAwPT09dD90aGlzLnBhZ2VzW2VdLm5ld1RlbXBvcmFyeUNvcHkoKTp0aGlzLnBhZ2VzW2UtMV07e2NvbnN0IGk9MD09PXQ/dGhpcy5nZXRTcHJlYWQoKVtlKzFdOnRoaXMuZ2V0U3ByZWFkKClbZS0xXTtyZXR1cm4gMT09PWkubGVuZ3RofHwwPT09dD90aGlzLnBhZ2VzW2lbMF1dOnRoaXMucGFnZXNbaVsxXV19fWdldEJvdHRvbVBhZ2UodCl7Y29uc3QgZT10aGlzLmN1cnJlbnRTcHJlYWRJbmRleDtpZihcInBvcnRyYWl0XCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpKXJldHVybiAwPT09dD90aGlzLnBhZ2VzW2UrMV06dGhpcy5wYWdlc1tlLTFdO3tjb25zdCBpPTA9PT10P3RoaXMuZ2V0U3ByZWFkKClbZSsxXTp0aGlzLmdldFNwcmVhZCgpW2UtMV07cmV0dXJuIDE9PT1pLmxlbmd0aD90aGlzLnBhZ2VzW2lbMF1dOjA9PT10P3RoaXMucGFnZXNbaVsxXV06dGhpcy5wYWdlc1tpWzBdXX19c2hvd05leHQoKXt0aGlzLmN1cnJlbnRTcHJlYWRJbmRleDx0aGlzLmdldFNwcmVhZCgpLmxlbmd0aCYmKHRoaXMuY3VycmVudFNwcmVhZEluZGV4KyssdGhpcy5zaG93U3ByZWFkKCkpfXNob3dQcmV2KCl7dGhpcy5jdXJyZW50U3ByZWFkSW5kZXg+MCYmKHRoaXMuY3VycmVudFNwcmVhZEluZGV4LS0sdGhpcy5zaG93U3ByZWFkKCkpfWdldEN1cnJlbnRQYWdlSW5kZXgoKXtyZXR1cm4gdGhpcy5jdXJyZW50UGFnZUluZGV4fXNob3codD1udWxsKXtpZihudWxsPT09dCYmKHQ9dGhpcy5jdXJyZW50UGFnZUluZGV4KSx0PDB8fHQ+PXRoaXMucGFnZXMubGVuZ3RoKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0U3ByZWFkSW5kZXhCeVBhZ2UodCk7bnVsbCE9PWUmJih0aGlzLmN1cnJlbnRTcHJlYWRJbmRleD1lLHRoaXMuc2hvd1NwcmVhZCgpKX1nZXRDdXJyZW50U3ByZWFkSW5kZXgoKXtyZXR1cm4gdGhpcy5jdXJyZW50U3ByZWFkSW5kZXh9c2V0Q3VycmVudFNwcmVhZEluZGV4KHQpe2lmKCEodD49MCYmdDx0aGlzLmdldFNwcmVhZCgpLmxlbmd0aCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYWdlXCIpO3RoaXMuY3VycmVudFNwcmVhZEluZGV4PXR9c2hvd1NwcmVhZCgpe2NvbnN0IHQ9dGhpcy5nZXRTcHJlYWQoKVt0aGlzLmN1cnJlbnRTcHJlYWRJbmRleF07Mj09PXQubGVuZ3RoPyh0aGlzLnJlbmRlci5zZXRMZWZ0UGFnZSh0aGlzLnBhZ2VzW3RbMF1dKSx0aGlzLnJlbmRlci5zZXRSaWdodFBhZ2UodGhpcy5wYWdlc1t0WzFdXSkpOlwibGFuZHNjYXBlXCI9PT10aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpJiZ0WzBdPT09dGhpcy5wYWdlcy5sZW5ndGgtMT8odGhpcy5yZW5kZXIuc2V0TGVmdFBhZ2UodGhpcy5wYWdlc1t0WzBdXSksdGhpcy5yZW5kZXIuc2V0UmlnaHRQYWdlKG51bGwpKToodGhpcy5yZW5kZXIuc2V0TGVmdFBhZ2UobnVsbCksdGhpcy5yZW5kZXIuc2V0UmlnaHRQYWdlKHRoaXMucGFnZXNbdFswXV0pKSx0aGlzLmN1cnJlbnRQYWdlSW5kZXg9dFswXSx0aGlzLmFwcC51cGRhdGVQYWdlSW5kZXgodGhpcy5jdXJyZW50UGFnZUluZGV4KX19Y2xhc3MgbiBleHRlbmRzIHN7Y29uc3RydWN0b3IodCxlLGkpe3N1cGVyKHQsZSksdGhpcy5pbWFnZXNIcmVmPWl9bG9hZCgpe2Zvcihjb25zdCB0IG9mIHRoaXMuaW1hZ2VzSHJlZil7Y29uc3QgZT1uZXcgaSh0aGlzLnJlbmRlcix0LFwic29mdFwiKTtlLmxvYWQoKSx0aGlzLnBhZ2VzLnB1c2goZSl9dGhpcy5jcmVhdGVTcHJlYWQoKX19Y2xhc3MgaHtzdGF0aWMgR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodCxlKXtyZXR1cm4gbnVsbD09PXR8fG51bGw9PT1lPzEvMDpNYXRoLnNxcnQoTWF0aC5wb3coZS54LXQueCwyKStNYXRoLnBvdyhlLnktdC55LDIpKX1zdGF0aWMgR2V0U2VnbWVudExlbmd0aCh0KXtyZXR1cm4gaC5HZXREaXN0YW5jZUJldHdlZW5Ud29Qb2ludCh0WzBdLHRbMV0pfXN0YXRpYyBHZXRBbmdsZUJldHdlZW5Ud29MaW5lKHQsZSl7Y29uc3QgaT10WzBdLnktdFsxXS55LHM9ZVswXS55LWVbMV0ueSxuPXRbMV0ueC10WzBdLngsaD1lWzFdLngtZVswXS54O3JldHVybiBNYXRoLmFjb3MoKGkqcytuKmgpLyhNYXRoLnNxcnQoaSppK24qbikqTWF0aC5zcXJ0KHMqcytoKmgpKSl9c3RhdGljIFBvaW50SW5SZWN0KHQsZSl7cmV0dXJuIG51bGw9PT1lP251bGw6ZS54Pj10LmxlZnQmJmUueDw9dC53aWR0aCt0LmxlZnQmJmUueT49dC50b3AmJmUueTw9dC50b3ArdC5oZWlnaHQ/ZTpudWxsfXN0YXRpYyBHZXRSb3RhdGVkUG9pbnQodCxlLGkpe3JldHVybnt4OnQueCpNYXRoLmNvcyhpKSt0LnkqTWF0aC5zaW4oaSkrZS54LHk6dC55Kk1hdGguY29zKGkpLXQueCpNYXRoLnNpbihpKStlLnl9fXN0YXRpYyBMaW1pdFBvaW50VG9DaXJjbGUodCxlLGkpe2lmKGguR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodCxpKTw9ZSlyZXR1cm4gaTtjb25zdCBzPXQueCxuPXQueSxyPWkueCxvPWkueTtsZXQgYT1NYXRoLnNxcnQoTWF0aC5wb3coZSwyKSpNYXRoLnBvdyhzLXIsMikvKE1hdGgucG93KHMtciwyKStNYXRoLnBvdyhuLW8sMikpKStzO2kueDwwJiYoYSo9LTEpO2xldCBnPShhLXMpKihuLW8pLyhzLXIpK247cmV0dXJuIHMtcituPT09MCYmKGc9ZSkse3g6YSx5Omd9fXN0YXRpYyBHZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudCh0LGUsaSl7cmV0dXJuIGguUG9pbnRJblJlY3QodCxoLkdldEludGVyc2VjdEJlZXR3ZW5Ud29MaW5lKGUsaSkpfXN0YXRpYyBHZXRJbnRlcnNlY3RCZWV0d2VuVHdvTGluZSh0LGUpe2NvbnN0IGk9dFswXS55LXRbMV0ueSxzPWVbMF0ueS1lWzFdLnksbj10WzFdLngtdFswXS54LGg9ZVsxXS54LWVbMF0ueCxyPXRbMF0ueCp0WzFdLnktdFsxXS54KnRbMF0ueSxvPWVbMF0ueCplWzFdLnktZVsxXS54KmVbMF0ueSxhPWkqby1zKnIsZz1uKm8taCpyLGw9LShyKmgtbypuKS8oaSpoLXMqbiksZD0tKGkqby1zKnIpLyhpKmgtcypuKTtpZihpc0Zpbml0ZShsKSYmaXNGaW5pdGUoZCkpcmV0dXJue3g6bCx5OmR9O2lmKE1hdGguYWJzKGEtZyk8LjEpdGhyb3cgbmV3IEVycm9yKFwiU2VnbWVudCBpbmNsdWRlZFwiKTtyZXR1cm4gbnVsbH1zdGF0aWMgR2V0Q29yZHNGcm9tVHdvUG9pbnQodCxlKXtjb25zdCBpPU1hdGguYWJzKHQueC1lLngpLHM9TWF0aC5hYnModC55LWUueSksbj1NYXRoLm1heChpLHMpLGg9W3RdO2Z1bmN0aW9uIHIodCxlLGkscyxuKXtyZXR1cm4gZT50P3QrbiooaS9zKTplPHQ/dC1uKihpL3MpOnR9Zm9yKGxldCBvPTE7bzw9bjtvKz0xKWgucHVzaCh7eDpyKHQueCxlLngsaSxuLG8pLHk6cih0LnksZS55LHMsbixvKX0pO3JldHVybiBofX1jbGFzcyByIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxpKSx0aGlzLmNvcGllZEVsZW1lbnQ9bnVsbCx0aGlzLnRlbXBvcmFyeUNvcHk9bnVsbCx0aGlzLmlzTG9hZD0hMSx0aGlzLmVsZW1lbnQ9ZSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInN0Zl9faXRlbVwiKSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIi0tXCIraSl9bmV3VGVtcG9yYXJ5Q29weSgpe3JldHVyblwiaGFyZFwiPT09dGhpcy5ub3dEcmF3aW5nRGVuc2l0eT90aGlzOihudWxsPT09dGhpcy50ZW1wb3JhcnlDb3B5JiYodGhpcy5jb3BpZWRFbGVtZW50PXRoaXMuZWxlbWVudC5jbG9uZU5vZGUoITApLHRoaXMuZWxlbWVudC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRoaXMuY29waWVkRWxlbWVudCksdGhpcy50ZW1wb3JhcnlDb3B5PW5ldyByKHRoaXMucmVuZGVyLHRoaXMuY29waWVkRWxlbWVudCx0aGlzLm5vd0RyYXdpbmdEZW5zaXR5KSksdGhpcy5nZXRUZW1wb3JhcnlDb3B5KCkpfWdldFRlbXBvcmFyeUNvcHkoKXtyZXR1cm4gdGhpcy50ZW1wb3JhcnlDb3B5fWhpZGVUZW1wb3JhcnlDb3B5KCl7bnVsbCE9PXRoaXMudGVtcG9yYXJ5Q29weSYmKHRoaXMuY29waWVkRWxlbWVudC5yZW1vdmUoKSx0aGlzLmNvcGllZEVsZW1lbnQ9bnVsbCx0aGlzLnRlbXBvcmFyeUNvcHk9bnVsbCl9ZHJhdyh0KXtjb25zdCBlPXR8fHRoaXMubm93RHJhd2luZ0RlbnNpdHksaT10aGlzLnJlbmRlci5jb252ZXJ0VG9HbG9iYWwodGhpcy5zdGF0ZS5wb3NpdGlvbikscz10aGlzLnJlbmRlci5nZXRSZWN0KCkucGFnZVdpZHRoLG49dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmhlaWdodDt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIi0tc2ltcGxlXCIpO2NvbnN0IGg9YFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xcbiAgICAgICAgICAgIHotaW5kZXg6ICR7dGhpcy5lbGVtZW50LnN0eWxlLnpJbmRleH07XFxuICAgICAgICAgICAgbGVmdDogMDtcXG4gICAgICAgICAgICB0b3A6IDA7XFxuICAgICAgICAgICAgd2lkdGg6ICR7c31weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7bn1weDtcXG4gICAgICAgIGA7XCJoYXJkXCI9PT1lP3RoaXMuZHJhd0hhcmQoaCk6dGhpcy5kcmF3U29mdChpLGgpfWRyYXdIYXJkKHQ9XCJcIil7Y29uc3QgZT10aGlzLnJlbmRlci5nZXRSZWN0KCkubGVmdCt0aGlzLnJlbmRlci5nZXRSZWN0KCkud2lkdGgvMixpPXRoaXMuc3RhdGUuaGFyZERyYXdpbmdBbmdsZSxzPXQrXCJcXG4gICAgICAgICAgICAgICAgYmFja2ZhY2UtdmlzaWJpbGl0eTogaGlkZGVuO1xcbiAgICAgICAgICAgICAgICAtd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6IGhpZGRlbjtcXG4gICAgICAgICAgICAgICAgY2xpcC1wYXRoOiBub25lO1xcbiAgICAgICAgICAgICAgICAtd2Via2l0LWNsaXAtcGF0aDogbm9uZTtcXG4gICAgICAgICAgICBcIisoMD09PXRoaXMub3JpZW50YXRpb24/YHRyYW5zZm9ybS1vcmlnaW46ICR7dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLnBhZ2VXaWR0aH1weCAwOyBcXG4gICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKSByb3RhdGVZKCR7aX1kZWcpO2A6YHRyYW5zZm9ybS1vcmlnaW46IDAgMDsgXFxuICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHtlfXB4LCAwLCAwKSByb3RhdGVZKCR7aX1kZWcpO2ApO3RoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0PXN9ZHJhd1NvZnQodCxlPVwiXCIpe2xldCBpPVwicG9seWdvbiggXCI7Zm9yKGNvbnN0IHQgb2YgdGhpcy5zdGF0ZS5hcmVhKWlmKG51bGwhPT10KXtsZXQgZT0xPT09dGhpcy5yZW5kZXIuZ2V0RGlyZWN0aW9uKCk/e3g6LXQueCt0aGlzLnN0YXRlLnBvc2l0aW9uLngseTp0LnktdGhpcy5zdGF0ZS5wb3NpdGlvbi55fTp7eDp0LngtdGhpcy5zdGF0ZS5wb3NpdGlvbi54LHk6dC55LXRoaXMuc3RhdGUucG9zaXRpb24ueX07ZT1oLkdldFJvdGF0ZWRQb2ludChlLHt4OjAseTowfSx0aGlzLnN0YXRlLmFuZ2xlKSxpKz1lLngrXCJweCBcIitlLnkrXCJweCwgXCJ9aT1pLnNsaWNlKDAsLTIpLGkrPVwiKVwiO2NvbnN0IHM9ZStgdHJhbnNmb3JtLW9yaWdpbjogMCAwOyBjbGlwLXBhdGg6ICR7aX07IC13ZWJraXQtY2xpcC1wYXRoOiAke2l9O2ArKHRoaXMucmVuZGVyLmlzU2FmYXJpKCkmJjA9PT10aGlzLnN0YXRlLmFuZ2xlP2B0cmFuc2Zvcm06IHRyYW5zbGF0ZSgke3QueH1weCwgJHt0Lnl9cHgpO2A6YHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoJHt0Lnh9cHgsICR7dC55fXB4LCAwKSByb3RhdGUoJHt0aGlzLnN0YXRlLmFuZ2xlfXJhZCk7YCk7dGhpcy5lbGVtZW50LnN0eWxlLmNzc1RleHQ9c31zaW1wbGVEcmF3KHQpe2NvbnN0IGU9dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLGk9ZS5wYWdlV2lkdGgscz1lLmhlaWdodCxuPTE9PT10P2UubGVmdCtlLnBhZ2VXaWR0aDplLmxlZnQsaD1lLnRvcDt0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIi0tc2ltcGxlXCIpLHRoaXMuZWxlbWVudC5zdHlsZS5jc3NUZXh0PWBcXG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7IFxcbiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOyBcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7c31weDsgXFxuICAgICAgICAgICAgbGVmdDogJHtufXB4OyBcXG4gICAgICAgICAgICB0b3A6ICR7aH1weDsgXFxuICAgICAgICAgICAgd2lkdGg6ICR7aX1weDsgXFxuICAgICAgICAgICAgei1pbmRleDogJHt0aGlzLnJlbmRlci5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzF9O2B9Z2V0RWxlbWVudCgpe3JldHVybiB0aGlzLmVsZW1lbnR9bG9hZCgpe3RoaXMuaXNMb2FkPSEwfXNldE9yaWVudGF0aW9uKHQpe3N1cGVyLnNldE9yaWVudGF0aW9uKHQpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiLS1sZWZ0XCIsXCItLXJpZ2h0XCIpLHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKDE9PT10P1wiLS1yaWdodFwiOlwiLS1sZWZ0XCIpfXNldERyYXdpbmdEZW5zaXR5KHQpe3RoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiLS1zb2Z0XCIsXCItLWhhcmRcIiksdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCItLVwiK3QpLHN1cGVyLnNldERyYXdpbmdEZW5zaXR5KHQpfX1jbGFzcyBvIGV4dGVuZHMgc3tjb25zdHJ1Y3Rvcih0LGUsaSxzKXtzdXBlcih0LGUpLHRoaXMuZWxlbWVudD1pLHRoaXMucGFnZXNFbGVtZW50PXN9bG9hZCgpe2Zvcihjb25zdCB0IG9mIHRoaXMucGFnZXNFbGVtZW50KXtjb25zdCBlPW5ldyByKHRoaXMucmVuZGVyLHQsXCJoYXJkXCI9PT10LmRhdGFzZXQuZGVuc2l0eT9cImhhcmRcIjpcInNvZnRcIik7ZS5sb2FkKCksdGhpcy5wYWdlcy5wdXNoKGUpfXRoaXMuY3JlYXRlU3ByZWFkKCl9fWNsYXNzIGF7Y29uc3RydWN0b3IodCxlLGkscyl7dGhpcy5kaXJlY3Rpb249dCx0aGlzLmNvcm5lcj1lLHRoaXMudG9wSW50ZXJzZWN0UG9pbnQ9bnVsbCx0aGlzLnNpZGVJbnRlcnNlY3RQb2ludD1udWxsLHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQ9bnVsbCx0aGlzLnBhZ2VXaWR0aD1wYXJzZUludChpLDEwKSx0aGlzLnBhZ2VIZWlnaHQ9cGFyc2VJbnQocywxMCl9Y2FsYyh0KXt0cnl7cmV0dXJuIHRoaXMucG9zaXRpb249dGhpcy5jYWxjQW5nbGVBbmRQb3NpdGlvbih0KSx0aGlzLmNhbGN1bGF0ZUludGVyc2VjdFBvaW50KHRoaXMucG9zaXRpb24pLCEwfWNhdGNoKHQpe3JldHVybiExfX1nZXRGbGlwcGluZ0NsaXBBcmVhKCl7Y29uc3QgdD1bXTtsZXQgZT0hMTtyZXR1cm4gdC5wdXNoKHRoaXMucmVjdC50b3BMZWZ0KSx0LnB1c2godGhpcy50b3BJbnRlcnNlY3RQb2ludCksbnVsbD09PXRoaXMuc2lkZUludGVyc2VjdFBvaW50P2U9ITA6KHQucHVzaCh0aGlzLnNpZGVJbnRlcnNlY3RQb2ludCksbnVsbD09PXRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQmJihlPSExKSksdC5wdXNoKHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQpLChlfHxcImJvdHRvbVwiPT09dGhpcy5jb3JuZXIpJiZ0LnB1c2godGhpcy5yZWN0LmJvdHRvbUxlZnQpLHR9Z2V0Qm90dG9tQ2xpcEFyZWEoKXtjb25zdCB0PVtdO3JldHVybiB0LnB1c2godGhpcy50b3BJbnRlcnNlY3RQb2ludCksXCJ0b3BcIj09PXRoaXMuY29ybmVyP3QucHVzaCh7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9KToobnVsbCE9PXRoaXMudG9wSW50ZXJzZWN0UG9pbnQmJnQucHVzaCh7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9KSx0LnB1c2goe3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9KSksbnVsbCE9PXRoaXMuc2lkZUludGVyc2VjdFBvaW50P2guR2V0RGlzdGFuY2VCZXR3ZWVuVHdvUG9pbnQodGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQsdGhpcy50b3BJbnRlcnNlY3RQb2ludCk+PTEwJiZ0LnB1c2godGhpcy5zaWRlSW50ZXJzZWN0UG9pbnQpOlwidG9wXCI9PT10aGlzLmNvcm5lciYmdC5wdXNoKHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fSksdC5wdXNoKHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQpLHQucHVzaCh0aGlzLnRvcEludGVyc2VjdFBvaW50KSx0fWdldEFuZ2xlKCl7cmV0dXJuIDA9PT10aGlzLmRpcmVjdGlvbj8tdGhpcy5hbmdsZTp0aGlzLmFuZ2xlfWdldFJlY3QoKXtyZXR1cm4gdGhpcy5yZWN0fWdldFBvc2l0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb259Z2V0QWN0aXZlQ29ybmVyKCl7cmV0dXJuIDA9PT10aGlzLmRpcmVjdGlvbj90aGlzLnJlY3QudG9wTGVmdDp0aGlzLnJlY3QudG9wUmlnaHR9Z2V0RGlyZWN0aW9uKCl7cmV0dXJuIHRoaXMuZGlyZWN0aW9ufWdldEZsaXBwaW5nUHJvZ3Jlc3MoKXtyZXR1cm4gTWF0aC5hYnMoKHRoaXMucG9zaXRpb24ueC10aGlzLnBhZ2VXaWR0aCkvKDIqdGhpcy5wYWdlV2lkdGgpKjEwMCl9Z2V0Q29ybmVyKCl7cmV0dXJuIHRoaXMuY29ybmVyfWdldEJvdHRvbVBhZ2VQb3NpdGlvbigpe3JldHVybiAxPT09dGhpcy5kaXJlY3Rpb24/e3g6dGhpcy5wYWdlV2lkdGgseTowfTp7eDowLHk6MH19Z2V0U2hhZG93U3RhcnRQb2ludCgpe3JldHVyblwidG9wXCI9PT10aGlzLmNvcm5lcj90aGlzLnRvcEludGVyc2VjdFBvaW50Om51bGwhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludD90aGlzLnNpZGVJbnRlcnNlY3RQb2ludDp0aGlzLnRvcEludGVyc2VjdFBvaW50fWdldFNoYWRvd0FuZ2xlKCl7Y29uc3QgdD1oLkdldEFuZ2xlQmV0d2VlblR3b0xpbmUodGhpcy5nZXRTZWdtZW50VG9TaGFkb3dMaW5lKCksW3t4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9XSk7cmV0dXJuIDA9PT10aGlzLmRpcmVjdGlvbj90Ok1hdGguUEktdH1jYWxjQW5nbGVBbmRQb3NpdGlvbih0KXtsZXQgZT10O2lmKHRoaXMudXBkYXRlQW5nbGVBbmRHZW9tZXRyeShlKSxlPVwidG9wXCI9PT10aGlzLmNvcm5lcj90aGlzLmNoZWNrUG9zaXRpb25BdENlbnRlckxpbmUoZSx7eDowLHk6MH0se3g6MCx5OnRoaXMucGFnZUhlaWdodH0pOnRoaXMuY2hlY2tQb3NpdGlvbkF0Q2VudGVyTGluZShlLHt4OjAseTp0aGlzLnBhZ2VIZWlnaHR9LHt4OjAseTowfSksTWF0aC5hYnMoZS54LXRoaXMucGFnZVdpZHRoKTwxJiZNYXRoLmFicyhlLnkpPDEpdGhyb3cgbmV3IEVycm9yKFwiUG9pbnQgaXMgdG9vIHNtYWxsXCIpO3JldHVybiBlfXVwZGF0ZUFuZ2xlQW5kR2VvbWV0cnkodCl7dGhpcy5hbmdsZT10aGlzLmNhbGN1bGF0ZUFuZ2xlKHQpLHRoaXMucmVjdD10aGlzLmdldFBhZ2VSZWN0KHQpfWNhbGN1bGF0ZUFuZ2xlKHQpe2NvbnN0IGU9dGhpcy5wYWdlV2lkdGgtdC54KzEsaT1cImJvdHRvbVwiPT09dGhpcy5jb3JuZXI/dGhpcy5wYWdlSGVpZ2h0LXQueTp0Lnk7bGV0IHM9MipNYXRoLmFjb3MoZS9NYXRoLnNxcnQoaSppK2UqZSkpO2k8MCYmKHM9LXMpO2NvbnN0IG49TWF0aC5QSS1zO2lmKCFpc0Zpbml0ZShzKXx8bj49MCYmbjwuMDAzKXRocm93IG5ldyBFcnJvcihcIlRoZSBHIHBvaW50IGlzIHRvbyBzbWFsbFwiKTtyZXR1cm5cImJvdHRvbVwiPT09dGhpcy5jb3JuZXImJihzPS1zKSxzfWdldFBhZ2VSZWN0KHQpe3JldHVyblwidG9wXCI9PT10aGlzLmNvcm5lcj90aGlzLmdldFJlY3RGcm9tQmFzZVBvaW50KFt7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfSx7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dLHQpOnRoaXMuZ2V0UmVjdEZyb21CYXNlUG9pbnQoW3t4OjAseTotdGhpcy5wYWdlSGVpZ2h0fSx7eDp0aGlzLnBhZ2VXaWR0aCx5Oi10aGlzLnBhZ2VIZWlnaHR9LHt4OjAseTowfSx7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9XSx0KX1nZXRSZWN0RnJvbUJhc2VQb2ludCh0LGUpe3JldHVybnt0b3BMZWZ0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbMF0sZSksdG9wUmlnaHQ6dGhpcy5nZXRSb3RhdGVkUG9pbnQodFsxXSxlKSxib3R0b21MZWZ0OnRoaXMuZ2V0Um90YXRlZFBvaW50KHRbMl0sZSksYm90dG9tUmlnaHQ6dGhpcy5nZXRSb3RhdGVkUG9pbnQodFszXSxlKX19Z2V0Um90YXRlZFBvaW50KHQsZSl7cmV0dXJue3g6dC54Kk1hdGguY29zKHRoaXMuYW5nbGUpK3QueSpNYXRoLnNpbih0aGlzLmFuZ2xlKStlLngseTp0LnkqTWF0aC5jb3ModGhpcy5hbmdsZSktdC54Kk1hdGguc2luKHRoaXMuYW5nbGUpK2UueX19Y2FsY3VsYXRlSW50ZXJzZWN0UG9pbnQodCl7Y29uc3QgZT17bGVmdDotMSx0b3A6LTEsd2lkdGg6dGhpcy5wYWdlV2lkdGgrMixoZWlnaHQ6dGhpcy5wYWdlSGVpZ2h0KzJ9O1widG9wXCI9PT10aGlzLmNvcm5lcj8odGhpcy50b3BJbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3QsdGhpcy5yZWN0LnRvcFJpZ2h0XSxbe3g6MCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6MH1dKSx0aGlzLnNpZGVJbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3QsdGhpcy5yZWN0LmJvdHRvbUxlZnRdLFt7eDp0aGlzLnBhZ2VXaWR0aCx5OjB9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0pLHRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0aGlzLnJlY3QuYm90dG9tTGVmdCx0aGlzLnJlY3QuYm90dG9tUmlnaHRdLFt7eDowLHk6dGhpcy5wYWdlSGVpZ2h0fSx7eDp0aGlzLnBhZ2VXaWR0aCx5OnRoaXMucGFnZUhlaWdodH1dKSk6KHRoaXMudG9wSW50ZXJzZWN0UG9pbnQ9aC5HZXRJbnRlcnNlY3RCZXR3ZWVuVHdvU2VnbWVudChlLFt0aGlzLnJlY3QudG9wTGVmdCx0aGlzLnJlY3QudG9wUmlnaHRdLFt7eDowLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTowfV0pLHRoaXMuc2lkZUludGVyc2VjdFBvaW50PWguR2V0SW50ZXJzZWN0QmV0d2VlblR3b1NlZ21lbnQoZSxbdCx0aGlzLnJlY3QudG9wTGVmdF0sW3t4OnRoaXMucGFnZVdpZHRoLHk6MH0se3g6dGhpcy5wYWdlV2lkdGgseTp0aGlzLnBhZ2VIZWlnaHR9XSksdGhpcy5ib3R0b21JbnRlcnNlY3RQb2ludD1oLkdldEludGVyc2VjdEJldHdlZW5Ud29TZWdtZW50KGUsW3RoaXMucmVjdC5ib3R0b21MZWZ0LHRoaXMucmVjdC5ib3R0b21SaWdodF0sW3t4OjAseTp0aGlzLnBhZ2VIZWlnaHR9LHt4OnRoaXMucGFnZVdpZHRoLHk6dGhpcy5wYWdlSGVpZ2h0fV0pKX1jaGVja1Bvc2l0aW9uQXRDZW50ZXJMaW5lKHQsZSxpKXtsZXQgcz10O2NvbnN0IG49aC5MaW1pdFBvaW50VG9DaXJjbGUoZSx0aGlzLnBhZ2VXaWR0aCxzKTtzIT09biYmKHM9bix0aGlzLnVwZGF0ZUFuZ2xlQW5kR2VvbWV0cnkocykpO2NvbnN0IHI9TWF0aC5zcXJ0KE1hdGgucG93KHRoaXMucGFnZVdpZHRoLDIpK01hdGgucG93KHRoaXMucGFnZUhlaWdodCwyKSk7bGV0IG89dGhpcy5yZWN0LmJvdHRvbVJpZ2h0LGE9dGhpcy5yZWN0LnRvcExlZnQ7aWYoXCJib3R0b21cIj09PXRoaXMuY29ybmVyJiYobz10aGlzLnJlY3QudG9wUmlnaHQsYT10aGlzLnJlY3QuYm90dG9tTGVmdCksby54PD0wKXtjb25zdCB0PWguTGltaXRQb2ludFRvQ2lyY2xlKGkscixhKTt0IT09cyYmKHM9dCx0aGlzLnVwZGF0ZUFuZ2xlQW5kR2VvbWV0cnkocykpfXJldHVybiBzfWdldFNlZ21lbnRUb1NoYWRvd0xpbmUoKXtjb25zdCB0PXRoaXMuZ2V0U2hhZG93U3RhcnRQb2ludCgpO3JldHVyblt0LHQhPT10aGlzLnNpZGVJbnRlcnNlY3RQb2ludCYmbnVsbCE9PXRoaXMuc2lkZUludGVyc2VjdFBvaW50P3RoaXMuc2lkZUludGVyc2VjdFBvaW50OnRoaXMuYm90dG9tSW50ZXJzZWN0UG9pbnRdfX1jbGFzcyBne2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5mbGlwcGluZ1BhZ2U9bnVsbCx0aGlzLmJvdHRvbVBhZ2U9bnVsbCx0aGlzLmNhbGM9bnVsbCx0aGlzLnN0YXRlPVwicmVhZFwiLHRoaXMucmVuZGVyPXQsdGhpcy5hcHA9ZX1mb2xkKHQpe3RoaXMuc2V0U3RhdGUoXCJ1c2VyX2ZvbGRcIiksbnVsbD09PXRoaXMuY2FsYyYmdGhpcy5zdGFydCh0KSx0aGlzLmRvKHRoaXMucmVuZGVyLmNvbnZlcnRUb1BhZ2UodCkpfWZsaXAodCl7aWYodGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5kaXNhYmxlRmxpcEJ5Q2xpY2smJiF0aGlzLmlzUG9pbnRPbkNvcm5lcnModCkpcmV0dXJuO2lmKG51bGwhPT10aGlzLmNhbGMmJnRoaXMucmVuZGVyLmZpbmlzaEFuaW1hdGlvbigpLCF0aGlzLnN0YXJ0KHQpKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpO3RoaXMuc2V0U3RhdGUoXCJmbGlwcGluZ1wiKTtjb25zdCBpPWUuaGVpZ2h0LzEwLHM9XCJib3R0b21cIj09PXRoaXMuY2FsYy5nZXRDb3JuZXIoKT9lLmhlaWdodC1pOmksbj1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0OjA7dGhpcy5jYWxjLmNhbGMoe3g6ZS5wYWdlV2lkdGgtaSx5OnN9KSx0aGlzLmFuaW1hdGVGbGlwcGluZ1RvKHt4OmUucGFnZVdpZHRoLWkseTpzfSx7eDotZS5wYWdlV2lkdGgseTpufSwhMCl9c3RhcnQodCl7dGhpcy5yZXNldCgpO2NvbnN0IGU9dGhpcy5yZW5kZXIuY29udmVydFRvQm9vayh0KSxpPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLHM9dGhpcy5nZXREaXJlY3Rpb25CeVBvaW50KGUpLG49ZS55Pj1pLmhlaWdodC8yP1wiYm90dG9tXCI6XCJ0b3BcIjtpZighdGhpcy5jaGVja0RpcmVjdGlvbihzKSlyZXR1cm4hMTt0cnl7aWYodGhpcy5mbGlwcGluZ1BhZ2U9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRGbGlwcGluZ1BhZ2UocyksdGhpcy5ib3R0b21QYWdlPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0Qm90dG9tUGFnZShzKSxcImxhbmRzY2FwZVwiPT09dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKSlpZigxPT09cyl7Y29uc3QgdD10aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLm5leHRCeSh0aGlzLmZsaXBwaW5nUGFnZSk7bnVsbCE9PXQmJnRoaXMuZmxpcHBpbmdQYWdlLmdldERlbnNpdHkoKSE9PXQuZ2V0RGVuc2l0eSgpJiYodGhpcy5mbGlwcGluZ1BhZ2Uuc2V0RHJhd2luZ0RlbnNpdHkoXCJoYXJkXCIpLHQuc2V0RHJhd2luZ0RlbnNpdHkoXCJoYXJkXCIpKX1lbHNle2NvbnN0IHQ9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5wcmV2QnkodGhpcy5mbGlwcGluZ1BhZ2UpO251bGwhPT10JiZ0aGlzLmZsaXBwaW5nUGFnZS5nZXREZW5zaXR5KCkhPT10LmdldERlbnNpdHkoKSYmKHRoaXMuZmxpcHBpbmdQYWdlLnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSx0LnNldERyYXdpbmdEZW5zaXR5KFwiaGFyZFwiKSl9cmV0dXJuIHRoaXMucmVuZGVyLnNldERpcmVjdGlvbihzKSx0aGlzLmNhbGM9bmV3IGEocyxuLGkucGFnZVdpZHRoLnRvU3RyaW5nKDEwKSxpLmhlaWdodC50b1N0cmluZygxMCkpLCEwfWNhdGNoKHQpe3JldHVybiExfX1kbyh0KXtpZihudWxsIT09dGhpcy5jYWxjJiZ0aGlzLmNhbGMuY2FsYyh0KSl7Y29uc3QgdD10aGlzLmNhbGMuZ2V0RmxpcHBpbmdQcm9ncmVzcygpO3RoaXMuYm90dG9tUGFnZS5zZXRBcmVhKHRoaXMuY2FsYy5nZXRCb3R0b21DbGlwQXJlYSgpKSx0aGlzLmJvdHRvbVBhZ2Uuc2V0UG9zaXRpb24odGhpcy5jYWxjLmdldEJvdHRvbVBhZ2VQb3NpdGlvbigpKSx0aGlzLmJvdHRvbVBhZ2Uuc2V0QW5nbGUoMCksdGhpcy5ib3R0b21QYWdlLnNldEhhcmRBbmdsZSgwKSx0aGlzLmZsaXBwaW5nUGFnZS5zZXRBcmVhKHRoaXMuY2FsYy5nZXRGbGlwcGluZ0NsaXBBcmVhKCkpLHRoaXMuZmxpcHBpbmdQYWdlLnNldFBvc2l0aW9uKHRoaXMuY2FsYy5nZXRBY3RpdmVDb3JuZXIoKSksdGhpcy5mbGlwcGluZ1BhZ2Uuc2V0QW5nbGUodGhpcy5jYWxjLmdldEFuZ2xlKCkpLDA9PT10aGlzLmNhbGMuZ2V0RGlyZWN0aW9uKCk/dGhpcy5mbGlwcGluZ1BhZ2Uuc2V0SGFyZEFuZ2xlKDkwKigyMDAtMip0KS8xMDApOnRoaXMuZmxpcHBpbmdQYWdlLnNldEhhcmRBbmdsZSgtOTAqKDIwMC0yKnQpLzEwMCksdGhpcy5yZW5kZXIuc2V0UGFnZVJlY3QodGhpcy5jYWxjLmdldFJlY3QoKSksdGhpcy5yZW5kZXIuc2V0Qm90dG9tUGFnZSh0aGlzLmJvdHRvbVBhZ2UpLHRoaXMucmVuZGVyLnNldEZsaXBwaW5nUGFnZSh0aGlzLmZsaXBwaW5nUGFnZSksdGhpcy5yZW5kZXIuc2V0U2hhZG93RGF0YSh0aGlzLmNhbGMuZ2V0U2hhZG93U3RhcnRQb2ludCgpLHRoaXMuY2FsYy5nZXRTaGFkb3dBbmdsZSgpLHQsdGhpcy5jYWxjLmdldERpcmVjdGlvbigpKX19ZmxpcFRvUGFnZSh0LGUpe2NvbnN0IGk9dGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5nZXRDdXJyZW50U3ByZWFkSW5kZXgoKSxzPXRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuZ2V0U3ByZWFkSW5kZXhCeVBhZ2UodCk7dHJ5e3M+aSYmKHRoaXMuYXBwLmdldFBhZ2VDb2xsZWN0aW9uKCkuc2V0Q3VycmVudFNwcmVhZEluZGV4KHMtMSksdGhpcy5mbGlwTmV4dChlKSksczxpJiYodGhpcy5hcHAuZ2V0UGFnZUNvbGxlY3Rpb24oKS5zZXRDdXJyZW50U3ByZWFkSW5kZXgocysxKSx0aGlzLmZsaXBQcmV2KGUpKX1jYXRjaCh0KXt9fWZsaXBOZXh0KHQpe3RoaXMuZmxpcCh7eDp0aGlzLnJlbmRlci5nZXRSZWN0KCkubGVmdCsyKnRoaXMucmVuZGVyLmdldFJlY3QoKS5wYWdlV2lkdGgtMTAseTpcInRvcFwiPT09dD8xOnRoaXMucmVuZGVyLmdldFJlY3QoKS5oZWlnaHQtMn0pfWZsaXBQcmV2KHQpe3RoaXMuZmxpcCh7eDoxMCx5OlwidG9wXCI9PT10PzE6dGhpcy5yZW5kZXIuZ2V0UmVjdCgpLmhlaWdodC0yfSl9c3RvcE1vdmUoKXtpZihudWxsPT09dGhpcy5jYWxjKXJldHVybjtjb25zdCB0PXRoaXMuY2FsYy5nZXRQb3NpdGlvbigpLGU9dGhpcy5nZXRCb3VuZHNSZWN0KCksaT1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0OjA7dC54PD0wP3RoaXMuYW5pbWF0ZUZsaXBwaW5nVG8odCx7eDotZS5wYWdlV2lkdGgseTppfSwhMCk6dGhpcy5hbmltYXRlRmxpcHBpbmdUbyh0LHt4OmUucGFnZVdpZHRoLHk6aX0sITEpfXNob3dDb3JuZXIodCl7aWYoIXRoaXMuY2hlY2tTdGF0ZShcInJlYWRcIixcImZvbGRfY29ybmVyXCIpKXJldHVybjtjb25zdCBlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpLGk9ZS5wYWdlV2lkdGg7aWYodGhpcy5pc1BvaW50T25Db3JuZXJzKHQpKWlmKG51bGw9PT10aGlzLmNhbGMpe2lmKCF0aGlzLnN0YXJ0KHQpKXJldHVybjt0aGlzLnNldFN0YXRlKFwiZm9sZF9jb3JuZXJcIiksdGhpcy5jYWxjLmNhbGMoe3g6aS0xLHk6MX0pO2NvbnN0IHM9NTAsbj1cImJvdHRvbVwiPT09dGhpcy5jYWxjLmdldENvcm5lcigpP2UuaGVpZ2h0LTE6MSxoPVwiYm90dG9tXCI9PT10aGlzLmNhbGMuZ2V0Q29ybmVyKCk/ZS5oZWlnaHQtczpzO3RoaXMuYW5pbWF0ZUZsaXBwaW5nVG8oe3g6aS0xLHk6bn0se3g6aS1zLHk6aH0sITEsITEpfWVsc2UgdGhpcy5kbyh0aGlzLnJlbmRlci5jb252ZXJ0VG9QYWdlKHQpKTtlbHNlIHRoaXMuc2V0U3RhdGUoXCJyZWFkXCIpLHRoaXMucmVuZGVyLmZpbmlzaEFuaW1hdGlvbigpLHRoaXMuc3RvcE1vdmUoKX1hbmltYXRlRmxpcHBpbmdUbyh0LGUsaSxzPSEwKXtjb25zdCBuPWguR2V0Q29yZHNGcm9tVHdvUG9pbnQodCxlKSxyPVtdO2Zvcihjb25zdCB0IG9mIG4pci5wdXNoKCgpPT50aGlzLmRvKHQpKTtjb25zdCBvPXRoaXMuZ2V0QW5pbWF0aW9uRHVyYXRpb24obi5sZW5ndGgpO3RoaXMucmVuZGVyLnN0YXJ0QW5pbWF0aW9uKHIsbywoKT0+e3RoaXMuY2FsYyYmKGkmJigxPT09dGhpcy5jYWxjLmdldERpcmVjdGlvbigpP3RoaXMuYXBwLnR1cm5Ub1ByZXZQYWdlKCk6dGhpcy5hcHAudHVyblRvTmV4dFBhZ2UoKSkscyYmKHRoaXMucmVuZGVyLnNldEJvdHRvbVBhZ2UobnVsbCksdGhpcy5yZW5kZXIuc2V0RmxpcHBpbmdQYWdlKG51bGwpLHRoaXMucmVuZGVyLmNsZWFyU2hhZG93KCksdGhpcy5zZXRTdGF0ZShcInJlYWRcIiksdGhpcy5yZXNldCgpKSl9KX1nZXRDYWxjdWxhdGlvbigpe3JldHVybiB0aGlzLmNhbGN9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5zdGF0ZX1zZXRTdGF0ZSh0KXt0aGlzLnN0YXRlIT09dCYmKHRoaXMuYXBwLnVwZGF0ZVN0YXRlKHQpLHRoaXMuc3RhdGU9dCl9Z2V0RGlyZWN0aW9uQnlQb2ludCh0KXtjb25zdCBlPXRoaXMuZ2V0Qm91bmRzUmVjdCgpO2lmKFwicG9ydHJhaXRcIj09PXRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCkpe2lmKHQueC1lLnBhZ2VXaWR0aDw9ZS53aWR0aC81KXJldHVybiAxfWVsc2UgaWYodC54PGUud2lkdGgvMilyZXR1cm4gMTtyZXR1cm4gMH1nZXRBbmltYXRpb25EdXJhdGlvbih0KXtjb25zdCBlPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuZmxpcHBpbmdUaW1lO3JldHVybiB0Pj0xZTM/ZTp0LzFlMyplfWNoZWNrRGlyZWN0aW9uKHQpe3JldHVybiAwPT09dD90aGlzLmFwcC5nZXRDdXJyZW50UGFnZUluZGV4KCk8dGhpcy5hcHAuZ2V0UGFnZUNvdW50KCktMTp0aGlzLmFwcC5nZXRDdXJyZW50UGFnZUluZGV4KCk+PTF9cmVzZXQoKXt0aGlzLmNhbGM9bnVsbCx0aGlzLmZsaXBwaW5nUGFnZT1udWxsLHRoaXMuYm90dG9tUGFnZT1udWxsfWdldEJvdW5kc1JlY3QoKXtyZXR1cm4gdGhpcy5yZW5kZXIuZ2V0UmVjdCgpfWNoZWNrU3RhdGUoLi4udCl7Zm9yKGNvbnN0IGUgb2YgdClpZih0aGlzLnN0YXRlPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX1pc1BvaW50T25Db3JuZXJzKHQpe2NvbnN0IGU9dGhpcy5nZXRCb3VuZHNSZWN0KCksaT1lLnBhZ2VXaWR0aCxzPU1hdGguc3FydChNYXRoLnBvdyhpLDIpK01hdGgucG93KGUuaGVpZ2h0LDIpKS81LG49dGhpcy5yZW5kZXIuY29udmVydFRvQm9vayh0KTtyZXR1cm4gbi54PjAmJm4ueT4wJiZuLng8ZS53aWR0aCYmbi55PGUuaGVpZ2h0JiYobi54PHN8fG4ueD5lLndpZHRoLXMpJiYobi55PHN8fG4ueT5lLmhlaWdodC1zKX19Y2xhc3MgbHtjb25zdHJ1Y3Rvcih0LGUpe3RoaXMubGVmdFBhZ2U9bnVsbCx0aGlzLnJpZ2h0UGFnZT1udWxsLHRoaXMuZmxpcHBpbmdQYWdlPW51bGwsdGhpcy5ib3R0b21QYWdlPW51bGwsdGhpcy5kaXJlY3Rpb249bnVsbCx0aGlzLm9yaWVudGF0aW9uPW51bGwsdGhpcy5zaGFkb3c9bnVsbCx0aGlzLmFuaW1hdGlvbj1udWxsLHRoaXMucGFnZVJlY3Q9bnVsbCx0aGlzLmJvdW5kc1JlY3Q9bnVsbCx0aGlzLnRpbWVyPTAsdGhpcy5zYWZhcmk9ITEsdGhpcy5zZXR0aW5nPWUsdGhpcy5hcHA9dDtjb25zdCBpPW5ldyBSZWdFeHAoXCJWZXJzaW9uXFxcXC9bXFxcXGRcXFxcLl0rLipTYWZhcmkvXCIpO3RoaXMuc2FmYXJpPW51bGwhPT1pLmV4ZWMod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpfXJlbmRlcih0KXtpZihudWxsIT09dGhpcy5hbmltYXRpb24pe2NvbnN0IGU9TWF0aC5yb3VuZCgodC10aGlzLmFuaW1hdGlvbi5zdGFydGVkQXQpL3RoaXMuYW5pbWF0aW9uLmR1cmF0aW9uRnJhbWUpO2U8dGhpcy5hbmltYXRpb24uZnJhbWVzLmxlbmd0aD90aGlzLmFuaW1hdGlvbi5mcmFtZXNbZV0oKToodGhpcy5hbmltYXRpb24ub25BbmltYXRlRW5kKCksdGhpcy5hbmltYXRpb249bnVsbCl9dGhpcy50aW1lcj10LHRoaXMuZHJhd0ZyYW1lKCl9c3RhcnQoKXt0aGlzLnVwZGF0ZSgpO2NvbnN0IHQ9ZT0+e3RoaXMucmVuZGVyKGUpLHJlcXVlc3RBbmltYXRpb25GcmFtZSh0KX07cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfXN0YXJ0QW5pbWF0aW9uKHQsZSxpKXt0aGlzLmZpbmlzaEFuaW1hdGlvbigpLHRoaXMuYW5pbWF0aW9uPXtmcmFtZXM6dCxkdXJhdGlvbjplLGR1cmF0aW9uRnJhbWU6ZS90Lmxlbmd0aCxvbkFuaW1hdGVFbmQ6aSxzdGFydGVkQXQ6dGhpcy50aW1lcn19ZmluaXNoQW5pbWF0aW9uKCl7bnVsbCE9PXRoaXMuYW5pbWF0aW9uJiYodGhpcy5hbmltYXRpb24uZnJhbWVzW3RoaXMuYW5pbWF0aW9uLmZyYW1lcy5sZW5ndGgtMV0oKSxudWxsIT09dGhpcy5hbmltYXRpb24ub25BbmltYXRlRW5kJiZ0aGlzLmFuaW1hdGlvbi5vbkFuaW1hdGVFbmQoKSksdGhpcy5hbmltYXRpb249bnVsbH11cGRhdGUoKXt0aGlzLmJvdW5kc1JlY3Q9bnVsbDtjb25zdCB0PXRoaXMuY2FsY3VsYXRlQm91bmRzUmVjdCgpO3RoaXMub3JpZW50YXRpb24hPT10JiYodGhpcy5vcmllbnRhdGlvbj10LHRoaXMuYXBwLnVwZGF0ZU9yaWVudGF0aW9uKHQpKX1jYWxjdWxhdGVCb3VuZHNSZWN0KCl7bGV0IHQ9XCJsYW5kc2NhcGVcIjtjb25zdCBlPXRoaXMuZ2V0QmxvY2tXaWR0aCgpLGk9ZS8yLHM9dGhpcy5nZXRCbG9ja0hlaWdodCgpLzIsbj10aGlzLnNldHRpbmcud2lkdGgvdGhpcy5zZXR0aW5nLmhlaWdodDtsZXQgaD10aGlzLnNldHRpbmcud2lkdGgscj10aGlzLnNldHRpbmcuaGVpZ2h0LG89aS1oO3JldHVyblwic3RyZXRjaFwiPT09dGhpcy5zZXR0aW5nLnNpemU/KGU8Mip0aGlzLnNldHRpbmcubWluV2lkdGgmJnRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlUG9ydHJhaXQmJih0PVwicG9ydHJhaXRcIiksaD1cInBvcnRyYWl0XCI9PT10P3RoaXMuZ2V0QmxvY2tXaWR0aCgpOnRoaXMuZ2V0QmxvY2tXaWR0aCgpLzIsaD50aGlzLnNldHRpbmcubWF4V2lkdGgmJihoPXRoaXMuc2V0dGluZy5tYXhXaWR0aCkscj1oL24scj50aGlzLmdldEJsb2NrSGVpZ2h0KCkmJihyPXRoaXMuZ2V0QmxvY2tIZWlnaHQoKSxoPXIqbiksbz1cInBvcnRyYWl0XCI9PT10P2ktaC8yLWg6aS1oKTplPDIqaCYmdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VQb3J0cmFpdCYmKHQ9XCJwb3J0cmFpdFwiLG89aS1oLzItaCksdGhpcy5ib3VuZHNSZWN0PXtsZWZ0Om8sdG9wOnMtci8yLHdpZHRoOjIqaCxoZWlnaHQ6cixwYWdlV2lkdGg6aH0sdH1zZXRTaGFkb3dEYXRhKHQsZSxpLHMpe2lmKCF0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmRyYXdTaGFkb3cpcmV0dXJuO2NvbnN0IG49MTAwKnRoaXMuZ2V0U2V0dGluZ3MoKS5tYXhTaGFkb3dPcGFjaXR5O3RoaXMuc2hhZG93PXtwb3M6dCxhbmdsZTplLHdpZHRoOjMqdGhpcy5nZXRSZWN0KCkucGFnZVdpZHRoLzQqaS8xMDAsb3BhY2l0eTooMTAwLWkpKm4vMTAwLzEwMCxkaXJlY3Rpb246cyxwcm9ncmVzczoyKml9fWNsZWFyU2hhZG93KCl7dGhpcy5zaGFkb3c9bnVsbH1nZXRCbG9ja1dpZHRoKCl7cmV0dXJuIHRoaXMuYXBwLmdldFVJKCkuZ2V0RGlzdEVsZW1lbnQoKS5vZmZzZXRXaWR0aH1nZXRCbG9ja0hlaWdodCgpe3JldHVybiB0aGlzLmFwcC5nZXRVSSgpLmdldERpc3RFbGVtZW50KCkub2Zmc2V0SGVpZ2h0fWdldERpcmVjdGlvbigpe3JldHVybiB0aGlzLmRpcmVjdGlvbn1nZXRSZWN0KCl7cmV0dXJuIG51bGw9PT10aGlzLmJvdW5kc1JlY3QmJnRoaXMuY2FsY3VsYXRlQm91bmRzUmVjdCgpLHRoaXMuYm91bmRzUmVjdH1nZXRTZXR0aW5ncygpe3JldHVybiB0aGlzLmFwcC5nZXRTZXR0aW5ncygpfWdldE9yaWVudGF0aW9uKCl7cmV0dXJuIHRoaXMub3JpZW50YXRpb259c2V0UGFnZVJlY3QodCl7dGhpcy5wYWdlUmVjdD10fXNldERpcmVjdGlvbih0KXt0aGlzLmRpcmVjdGlvbj10fXNldFJpZ2h0UGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigxKSx0aGlzLnJpZ2h0UGFnZT10fXNldExlZnRQYWdlKHQpe251bGwhPT10JiZ0LnNldE9yaWVudGF0aW9uKDApLHRoaXMubGVmdFBhZ2U9dH1zZXRCb3R0b21QYWdlKHQpe251bGwhPT10JiZ0LnNldE9yaWVudGF0aW9uKDE9PT10aGlzLmRpcmVjdGlvbj8wOjEpLHRoaXMuYm90dG9tUGFnZT10fXNldEZsaXBwaW5nUGFnZSh0KXtudWxsIT09dCYmdC5zZXRPcmllbnRhdGlvbigwPT09dGhpcy5kaXJlY3Rpb24mJlwicG9ydHJhaXRcIiE9PXRoaXMub3JpZW50YXRpb24/MDoxKSx0aGlzLmZsaXBwaW5nUGFnZT10fWNvbnZlcnRUb0Jvb2sodCl7Y29uc3QgZT10aGlzLmdldFJlY3QoKTtyZXR1cm57eDp0LngtZS5sZWZ0LHk6dC55LWUudG9wfX1pc1NhZmFyaSgpe3JldHVybiB0aGlzLnNhZmFyaX1jb252ZXJ0VG9QYWdlKHQsZSl7ZXx8KGU9dGhpcy5kaXJlY3Rpb24pO2NvbnN0IGk9dGhpcy5nZXRSZWN0KCk7cmV0dXJue3g6MD09PWU/dC54LWkubGVmdC1pLndpZHRoLzI6aS53aWR0aC8yLXQueCtpLmxlZnQseTp0LnktaS50b3B9fWNvbnZlcnRUb0dsb2JhbCh0LGUpe2lmKGV8fChlPXRoaXMuZGlyZWN0aW9uKSxudWxsPT10KXJldHVybiBudWxsO2NvbnN0IGk9dGhpcy5nZXRSZWN0KCk7cmV0dXJue3g6MD09PWU/dC54K2kubGVmdCtpLndpZHRoLzI6aS53aWR0aC8yLXQueCtpLmxlZnQseTp0LnkraS50b3B9fWNvbnZlcnRSZWN0VG9HbG9iYWwodCxlKXtyZXR1cm4gZXx8KGU9dGhpcy5kaXJlY3Rpb24pLHt0b3BMZWZ0OnRoaXMuY29udmVydFRvR2xvYmFsKHQudG9wTGVmdCxlKSx0b3BSaWdodDp0aGlzLmNvbnZlcnRUb0dsb2JhbCh0LnRvcFJpZ2h0LGUpLGJvdHRvbUxlZnQ6dGhpcy5jb252ZXJ0VG9HbG9iYWwodC5ib3R0b21MZWZ0LGUpLGJvdHRvbVJpZ2h0OnRoaXMuY29udmVydFRvR2xvYmFsKHQuYm90dG9tUmlnaHQsZSl9fX1jbGFzcyBkIGV4dGVuZHMgbHtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlKSx0aGlzLmNhbnZhcz1pLHRoaXMuY3R4PWkuZ2V0Q29udGV4dChcIjJkXCIpfWdldENvbnRleHQoKXtyZXR1cm4gdGhpcy5jdHh9cmVsb2FkKCl7fWRyYXdGcmFtZSgpe3RoaXMuY2xlYXIoKSxcInBvcnRyYWl0XCIhPT10aGlzLm9yaWVudGF0aW9uJiZudWxsIT10aGlzLmxlZnRQYWdlJiZ0aGlzLmxlZnRQYWdlLnNpbXBsZURyYXcoMCksbnVsbCE9dGhpcy5yaWdodFBhZ2UmJnRoaXMucmlnaHRQYWdlLnNpbXBsZURyYXcoMSksbnVsbCE9dGhpcy5ib3R0b21QYWdlJiZ0aGlzLmJvdHRvbVBhZ2UuZHJhdygpLHRoaXMuZHJhd0Jvb2tTaGFkb3coKSxudWxsIT10aGlzLmZsaXBwaW5nUGFnZSYmdGhpcy5mbGlwcGluZ1BhZ2UuZHJhdygpLG51bGwhPXRoaXMuc2hhZG93JiYodGhpcy5kcmF3T3V0ZXJTaGFkb3coKSx0aGlzLmRyYXdJbm5lclNoYWRvdygpKTtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpO1wicG9ydHJhaXRcIj09PXRoaXMub3JpZW50YXRpb24mJih0aGlzLmN0eC5iZWdpblBhdGgoKSx0aGlzLmN0eC5yZWN0KHQubGVmdCt0LnBhZ2VXaWR0aCx0LnRvcCx0LndpZHRoLHQuaGVpZ2h0KSx0aGlzLmN0eC5jbGlwKCkpfWRyYXdCb29rU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTt0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCk7Y29uc3QgZT10LndpZHRoLzIwO3RoaXMuY3R4LnJlY3QodC5sZWZ0LHQudG9wLHQud2lkdGgsdC5oZWlnaHQpO2NvbnN0IGk9e3g6dC5sZWZ0K3Qud2lkdGgvMi1lLzIseTowfTt0aGlzLmN0eC50cmFuc2xhdGUoaS54LGkueSk7Y29uc3Qgcz10aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsZSwwKTtzLmFkZENvbG9yU3RvcCgwLFwicmdiYSgwLCAwLCAwLCAwKVwiKSxzLmFkZENvbG9yU3RvcCguNCxcInJnYmEoMCwgMCwgMCwgMC4yKVwiKSxzLmFkZENvbG9yU3RvcCguNDksXCJyZ2JhKDAsIDAsIDAsIDAuMSlcIikscy5hZGRDb2xvclN0b3AoLjUsXCJyZ2JhKDAsIDAsIDAsIDAuNSlcIikscy5hZGRDb2xvclN0b3AoLjUxLFwicmdiYSgwLCAwLCAwLCAwLjQpXCIpLHMuYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIDApXCIpLHRoaXMuY3R4LmNsaXAoKSx0aGlzLmN0eC5maWxsU3R5bGU9cyx0aGlzLmN0eC5maWxsUmVjdCgwLDAsZSwyKnQuaGVpZ2h0KSx0aGlzLmN0eC5yZXN0b3JlKCl9ZHJhd091dGVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKTt0aGlzLmN0eC5zYXZlKCksdGhpcy5jdHguYmVnaW5QYXRoKCksdGhpcy5jdHgucmVjdCh0LmxlZnQsdC50b3AsdC53aWR0aCx0LmhlaWdodCk7Y29uc3QgZT10aGlzLmNvbnZlcnRUb0dsb2JhbCh7eDp0aGlzLnNoYWRvdy5wb3MueCx5OnRoaXMuc2hhZG93LnBvcy55fSk7dGhpcy5jdHgudHJhbnNsYXRlKGUueCxlLnkpLHRoaXMuY3R4LnJvdGF0ZShNYXRoLlBJK3RoaXMuc2hhZG93LmFuZ2xlK01hdGguUEkvMik7Y29uc3QgaT10aGlzLmN0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLDAsdGhpcy5zaGFkb3cud2lkdGgsMCk7MD09PXRoaXMuc2hhZG93LmRpcmVjdGlvbj8odGhpcy5jdHgudHJhbnNsYXRlKDAsLTEwMCksaS5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksaS5hZGRDb2xvclN0b3AoMSxcInJnYmEoMCwgMCwgMCwgMClcIikpOih0aGlzLmN0eC50cmFuc2xhdGUoLXRoaXMuc2hhZG93LndpZHRoLC0xMDApLGkuYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIDApXCIpLGkuYWRkQ29sb3JTdG9wKDEsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpKSx0aGlzLmN0eC5jbGlwKCksdGhpcy5jdHguZmlsbFN0eWxlPWksdGhpcy5jdHguZmlsbFJlY3QoMCwwLHRoaXMuc2hhZG93LndpZHRoLDIqdC5oZWlnaHQpLHRoaXMuY3R4LnJlc3RvcmUoKX1kcmF3SW5uZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpO3RoaXMuY3R4LnNhdmUoKSx0aGlzLmN0eC5iZWdpblBhdGgoKTtjb25zdCBlPXRoaXMuY29udmVydFRvR2xvYmFsKHt4OnRoaXMuc2hhZG93LnBvcy54LHk6dGhpcy5zaGFkb3cucG9zLnl9KSxpPXRoaXMuY29udmVydFJlY3RUb0dsb2JhbCh0aGlzLnBhZ2VSZWN0KTt0aGlzLmN0eC5tb3ZlVG8oaS50b3BMZWZ0LngsaS50b3BMZWZ0LnkpLHRoaXMuY3R4LmxpbmVUbyhpLnRvcFJpZ2h0LngsaS50b3BSaWdodC55KSx0aGlzLmN0eC5saW5lVG8oaS5ib3R0b21SaWdodC54LGkuYm90dG9tUmlnaHQueSksdGhpcy5jdHgubGluZVRvKGkuYm90dG9tTGVmdC54LGkuYm90dG9tTGVmdC55KSx0aGlzLmN0eC50cmFuc2xhdGUoZS54LGUueSksdGhpcy5jdHgucm90YXRlKE1hdGguUEkrdGhpcy5zaGFkb3cuYW5nbGUrTWF0aC5QSS8yKTtjb25zdCBzPTMqdGhpcy5zaGFkb3cud2lkdGgvNCxuPXRoaXMuY3R4LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsMCxzLDApOzA9PT10aGlzLnNoYWRvdy5kaXJlY3Rpb24/KHRoaXMuY3R4LnRyYW5zbGF0ZSgtcywtMTAwKSxuLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxuLmFkZENvbG9yU3RvcCguOSxcInJnYmEoMCwgMCwgMCwgMC4wNSlcIiksbi5hZGRDb2xvclN0b3AoLjcsXCJyZ2JhKDAsIDAsIDAsIFwiK3RoaXMuc2hhZG93Lm9wYWNpdHkrXCIpXCIpLG4uYWRkQ29sb3JTdG9wKDAsXCJyZ2JhKDAsIDAsIDAsIDApXCIpKToodGhpcy5jdHgudHJhbnNsYXRlKDAsLTEwMCksbi5hZGRDb2xvclN0b3AoMCxcInJnYmEoMCwgMCwgMCwgXCIrdGhpcy5zaGFkb3cub3BhY2l0eStcIilcIiksbi5hZGRDb2xvclN0b3AoLjEsXCJyZ2JhKDAsIDAsIDAsIDAuMDUpXCIpLG4uYWRkQ29sb3JTdG9wKC4zLFwicmdiYSgwLCAwLCAwLCBcIit0aGlzLnNoYWRvdy5vcGFjaXR5K1wiKVwiKSxuLmFkZENvbG9yU3RvcCgxLFwicmdiYSgwLCAwLCAwLCAwKVwiKSksdGhpcy5jdHguY2xpcCgpLHRoaXMuY3R4LmZpbGxTdHlsZT1uLHRoaXMuY3R4LmZpbGxSZWN0KDAsMCxzLDIqdC5oZWlnaHQpLHRoaXMuY3R4LnJlc3RvcmUoKX1jbGVhcigpe3RoaXMuY3R4LmZpbGxTdHlsZT1cIndoaXRlXCIsdGhpcy5jdHguZmlsbFJlY3QoMCwwLHRoaXMuY2FudmFzLndpZHRoLHRoaXMuY2FudmFzLmhlaWdodCl9fWNsYXNzIHB7Y29uc3RydWN0b3IodCxlLGkpe3RoaXMudG91Y2hQb2ludD1udWxsLHRoaXMuc3dpcGVUaW1lb3V0PTI1MCx0aGlzLm9uUmVzaXplPSgpPT57dGhpcy51cGRhdGUoKX0sdGhpcy5vbk1vdXNlRG93bj10PT57aWYodGhpcy5jaGVja1RhcmdldCh0LnRhcmdldCkpe2NvbnN0IGU9dGhpcy5nZXRNb3VzZVBvcyh0LmNsaWVudFgsdC5jbGllbnRZKTt0aGlzLmFwcC5zdGFydFVzZXJUb3VjaChlKSx0LnByZXZlbnREZWZhdWx0KCl9fSx0aGlzLm9uVG91Y2hTdGFydD10PT57aWYodGhpcy5jaGVja1RhcmdldCh0LnRhcmdldCkmJnQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoPjApe2NvbnN0IGU9dC5jaGFuZ2VkVG91Y2hlc1swXSxpPXRoaXMuZ2V0TW91c2VQb3MoZS5jbGllbnRYLGUuY2xpZW50WSk7dGhpcy50b3VjaFBvaW50PXtwb2ludDppLHRpbWU6RGF0ZS5ub3coKX0sc2V0VGltZW91dCgoKT0+e251bGwhPT10aGlzLnRvdWNoUG9pbnQmJnRoaXMuYXBwLnN0YXJ0VXNlclRvdWNoKGkpfSx0aGlzLnN3aXBlVGltZW91dCksdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5tb2JpbGVTY3JvbGxTdXBwb3J0fHx0LnByZXZlbnREZWZhdWx0KCl9fSx0aGlzLm9uTW91c2VVcD10PT57Y29uc3QgZT10aGlzLmdldE1vdXNlUG9zKHQuY2xpZW50WCx0LmNsaWVudFkpO3RoaXMuYXBwLnVzZXJTdG9wKGUpfSx0aGlzLm9uTW91c2VNb3ZlPXQ9Pntjb25zdCBlPXRoaXMuZ2V0TW91c2VQb3ModC5jbGllbnRYLHQuY2xpZW50WSk7dGhpcy5hcHAudXNlck1vdmUoZSwhMSl9LHRoaXMub25Ub3VjaE1vdmU9dD0+e2lmKHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoPjApe2NvbnN0IGU9dC5jaGFuZ2VkVG91Y2hlc1swXSxpPXRoaXMuZ2V0TW91c2VQb3MoZS5jbGllbnRYLGUuY2xpZW50WSk7dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5tb2JpbGVTY3JvbGxTdXBwb3J0PyhudWxsIT09dGhpcy50b3VjaFBvaW50JiYoTWF0aC5hYnModGhpcy50b3VjaFBvaW50LnBvaW50LngtaS54KT4xMHx8XCJyZWFkXCIhPT10aGlzLmFwcC5nZXRTdGF0ZSgpKSYmdC5jYW5jZWxhYmxlJiZ0aGlzLmFwcC51c2VyTW92ZShpLCEwKSxcInJlYWRcIiE9PXRoaXMuYXBwLmdldFN0YXRlKCkmJnQucHJldmVudERlZmF1bHQoKSk6dGhpcy5hcHAudXNlck1vdmUoaSwhMCl9fSx0aGlzLm9uVG91Y2hFbmQ9dD0+e2lmKHQuY2hhbmdlZFRvdWNoZXMubGVuZ3RoPjApe2NvbnN0IGU9dC5jaGFuZ2VkVG91Y2hlc1swXSxpPXRoaXMuZ2V0TW91c2VQb3MoZS5jbGllbnRYLGUuY2xpZW50WSk7bGV0IHM9ITE7aWYobnVsbCE9PXRoaXMudG91Y2hQb2ludCl7Y29uc3QgdD1pLngtdGhpcy50b3VjaFBvaW50LnBvaW50LngsZT1NYXRoLmFicyhpLnktdGhpcy50b3VjaFBvaW50LnBvaW50LnkpO01hdGguYWJzKHQpPnRoaXMuc3dpcGVEaXN0YW5jZSYmZTwyKnRoaXMuc3dpcGVEaXN0YW5jZSYmRGF0ZS5ub3coKS10aGlzLnRvdWNoUG9pbnQudGltZTx0aGlzLnN3aXBlVGltZW91dCYmKHQ+MD90aGlzLmFwcC5mbGlwUHJldih0aGlzLnRvdWNoUG9pbnQucG9pbnQueTx0aGlzLmFwcC5nZXRSZW5kZXIoKS5nZXRSZWN0KCkuaGVpZ2h0LzI/XCJ0b3BcIjpcImJvdHRvbVwiKTp0aGlzLmFwcC5mbGlwTmV4dCh0aGlzLnRvdWNoUG9pbnQucG9pbnQueTx0aGlzLmFwcC5nZXRSZW5kZXIoKS5nZXRSZWN0KCkuaGVpZ2h0LzI/XCJ0b3BcIjpcImJvdHRvbVwiKSxzPSEwKSx0aGlzLnRvdWNoUG9pbnQ9bnVsbH10aGlzLmFwcC51c2VyU3RvcChpLHMpfX0sdGhpcy5wYXJlbnRFbGVtZW50PXQsdC5jbGFzc0xpc3QuYWRkKFwic3RmX19wYXJlbnRcIiksdC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsJzxkaXYgY2xhc3M9XCJzdGZfX3dyYXBwZXJcIj48L2Rpdj4nKSx0aGlzLndyYXBwZXI9dC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9fd3JhcHBlclwiKSx0aGlzLmFwcD1lO2NvbnN0IHM9dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS51c2VQb3J0cmFpdD8xOjI7dC5zdHlsZS5taW5XaWR0aD1pLm1pbldpZHRoKnMrXCJweFwiLHQuc3R5bGUubWluSGVpZ2h0PWkubWluSGVpZ2h0K1wicHhcIixcImZpeGVkXCI9PT1pLnNpemUmJih0LnN0eWxlLm1pbldpZHRoPWkud2lkdGgqcytcInB4XCIsdC5zdHlsZS5taW5IZWlnaHQ9aS5oZWlnaHQrXCJweFwiKSxpLmF1dG9TaXplJiYodC5zdHlsZS53aWR0aD1cIjEwMCVcIix0LnN0eWxlLm1heFdpZHRoPTIqaS5tYXhXaWR0aCtcInB4XCIpLHQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplLCExKSx0aGlzLnN3aXBlRGlzdGFuY2U9aS5zd2lwZURpc3RhbmNlfWRlc3Ryb3koKXt0aGlzLmFwcC5nZXRTZXR0aW5ncygpLnVzZU1vdXNlRXZlbnRzJiZ0aGlzLnJlbW92ZUhhbmRsZXJzKCksdGhpcy5kaXN0RWxlbWVudC5yZW1vdmUoKSx0aGlzLndyYXBwZXIucmVtb3ZlKCl9Z2V0RGlzdEVsZW1lbnQoKXtyZXR1cm4gdGhpcy5kaXN0RWxlbWVudH1nZXRXcmFwcGVyKCl7cmV0dXJuIHRoaXMud3JhcHBlcn1zZXRPcmllbnRhdGlvblN0eWxlKHQpe3RoaXMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKFwiLS1wb3J0cmFpdFwiLFwiLS1sYW5kc2NhcGVcIiksXCJwb3J0cmFpdFwiPT09dD8odGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5hdXRvU2l6ZSYmKHRoaXMud3JhcHBlci5zdHlsZS5wYWRkaW5nQm90dG9tPXRoaXMuYXBwLmdldFNldHRpbmdzKCkuaGVpZ2h0L3RoaXMuYXBwLmdldFNldHRpbmdzKCkud2lkdGgqMTAwK1wiJVwiKSx0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZChcIi0tcG9ydHJhaXRcIikpOih0aGlzLmFwcC5nZXRTZXR0aW5ncygpLmF1dG9TaXplJiYodGhpcy53cmFwcGVyLnN0eWxlLnBhZGRpbmdCb3R0b209dGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS5oZWlnaHQvKDIqdGhpcy5hcHAuZ2V0U2V0dGluZ3MoKS53aWR0aCkqMTAwK1wiJVwiKSx0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZChcIi0tbGFuZHNjYXBlXCIpKSx0aGlzLnVwZGF0ZSgpfXJlbW92ZUhhbmRsZXJzKCl7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLm9uUmVzaXplKSx0aGlzLmRpc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2VEb3duKSx0aGlzLmRpc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vbk1vdXNlTW92ZSksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uVG91Y2hNb3ZlKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uTW91c2VVcCksd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Ub3VjaEVuZCl9c2V0SGFuZGxlcnMoKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMub25SZXNpemUsITEpLHRoaXMuYXBwLmdldFNldHRpbmdzKCkudXNlTW91c2VFdmVudHMmJih0aGlzLmRpc3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm9uTW91c2VEb3duKSx0aGlzLmRpc3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vblRvdWNoU3RhcnQpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5vbk1vdXNlTW92ZSksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIix0aGlzLm9uVG91Y2hNb3ZlLHtwYXNzaXZlOiF0aGlzLmFwcC5nZXRTZXR0aW5ncygpLm1vYmlsZVNjcm9sbFN1cHBvcnR9KSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm9uTW91c2VVcCksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMub25Ub3VjaEVuZCkpfWdldE1vdXNlUG9zKHQsZSl7Y29uc3QgaT10aGlzLmRpc3RFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3JldHVybnt4OnQtaS5sZWZ0LHk6ZS1pLnRvcH19Y2hlY2tUYXJnZXQodCl7cmV0dXJuIXRoaXMuYXBwLmdldFNldHRpbmdzKCkuY2xpY2tFdmVudEZvcndhcmR8fCFbXCJhXCIsXCJidXR0b25cIl0uaW5jbHVkZXModC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpfX1jbGFzcyBjIGV4dGVuZHMgcHtjb25zdHJ1Y3Rvcih0LGUsaSxzKXtzdXBlcih0LGUsaSksdGhpcy53cmFwcGVyLmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwnPGRpdiBjbGFzcz1cInN0Zl9fYmxvY2tcIj48L2Rpdj4nKSx0aGlzLmRpc3RFbGVtZW50PXQucXVlcnlTZWxlY3RvcihcIi5zdGZfX2Jsb2NrXCIpLHRoaXMuaXRlbXM9cztmb3IoY29uc3QgdCBvZiBzKXRoaXMuZGlzdEVsZW1lbnQuYXBwZW5kQ2hpbGQodCk7dGhpcy5zZXRIYW5kbGVycygpfWNsZWFyKCl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5pdGVtcyl0aGlzLnBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodCl9dXBkYXRlSXRlbXModCl7dGhpcy5yZW1vdmVIYW5kbGVycygpLHRoaXMuZGlzdEVsZW1lbnQuaW5uZXJIVE1MPVwiXCI7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLmRpc3RFbGVtZW50LmFwcGVuZENoaWxkKGUpO3RoaXMuaXRlbXM9dCx0aGlzLnNldEhhbmRsZXJzKCl9dXBkYXRlKCl7dGhpcy5hcHAuZ2V0UmVuZGVyKCkudXBkYXRlKCl9fWNsYXNzIHUgZXh0ZW5kcyBwe2NvbnN0cnVjdG9yKHQsZSxpKXtzdXBlcih0LGUsaSksdGhpcy53cmFwcGVyLmlubmVySFRNTD0nPGNhbnZhcyBjbGFzcz1cInN0Zl9fY2FudmFzXCI+PC9jYW52YXM+Jyx0aGlzLmNhbnZhcz10LnF1ZXJ5U2VsZWN0b3JBbGwoXCJjYW52YXNcIilbMF0sdGhpcy5kaXN0RWxlbWVudD10aGlzLmNhbnZhcyx0aGlzLnJlc2l6ZUNhbnZhcygpLHRoaXMuc2V0SGFuZGxlcnMoKX1yZXNpemVDYW52YXMoKXtjb25zdCB0PWdldENvbXB1dGVkU3R5bGUodGhpcy5jYW52YXMpLGU9cGFyc2VJbnQodC5nZXRQcm9wZXJ0eVZhbHVlKFwid2lkdGhcIiksMTApLGk9cGFyc2VJbnQodC5nZXRQcm9wZXJ0eVZhbHVlKFwiaGVpZ2h0XCIpLDEwKTt0aGlzLmNhbnZhcy53aWR0aD1lLHRoaXMuY2FudmFzLmhlaWdodD1pfWdldENhbnZhcygpe3JldHVybiB0aGlzLmNhbnZhc311cGRhdGUoKXt0aGlzLnJlc2l6ZUNhbnZhcygpLHRoaXMuYXBwLmdldFJlbmRlcigpLnVwZGF0ZSgpfX1jbGFzcyB3IGV4dGVuZHMgbHtjb25zdHJ1Y3Rvcih0LGUsaSl7c3VwZXIodCxlKSx0aGlzLm91dGVyU2hhZG93PW51bGwsdGhpcy5pbm5lclNoYWRvdz1udWxsLHRoaXMuaGFyZFNoYWRvdz1udWxsLHRoaXMuaGFyZElubmVyU2hhZG93PW51bGwsdGhpcy5lbGVtZW50PWksdGhpcy5jcmVhdGVTaGFkb3dzKCl9Y3JlYXRlU2hhZG93cygpe3RoaXMuZWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwnPGRpdiBjbGFzcz1cInN0Zl9fb3V0ZXJTaGFkb3dcIj48L2Rpdj5cXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0Zl9faW5uZXJTaGFkb3dcIj48L2Rpdj5cXG4gICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0Zl9faGFyZFNoYWRvd1wiPjwvZGl2PlxcbiAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RmX19oYXJkSW5uZXJTaGFkb3dcIj48L2Rpdj4nKSx0aGlzLm91dGVyU2hhZG93PXRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnN0Zl9fb3V0ZXJTaGFkb3dcIiksdGhpcy5pbm5lclNoYWRvdz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX2lubmVyU2hhZG93XCIpLHRoaXMuaGFyZFNoYWRvdz10aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX2hhcmRTaGFkb3dcIiksdGhpcy5oYXJkSW5uZXJTaGFkb3c9dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc3RmX19oYXJkSW5uZXJTaGFkb3dcIil9Y2xlYXJTaGFkb3coKXtzdXBlci5jbGVhclNoYWRvdygpLHRoaXMub3V0ZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6IG5vbmVcIix0aGlzLmlubmVyU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIsdGhpcy5oYXJkU2hhZG93LnN0eWxlLmNzc1RleHQ9XCJkaXNwbGF5OiBub25lXCIsdGhpcy5oYXJkSW5uZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6IG5vbmVcIn1yZWxvYWQoKXt0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zdGZfX291dGVyU2hhZG93XCIpfHx0aGlzLmNyZWF0ZVNoYWRvd3MoKX1kcmF3SGFyZElubmVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKSxlPXRoaXMuc2hhZG93LnByb2dyZXNzPjEwMD8yMDAtdGhpcy5zaGFkb3cucHJvZ3Jlc3M6dGhpcy5zaGFkb3cucHJvZ3Jlc3M7bGV0IGk9KDEwMC1lKSooMi41KnQucGFnZVdpZHRoKS8xMDArMjA7aT50LnBhZ2VXaWR0aCYmKGk9dC5wYWdlV2lkdGgpO2xldCBzPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAkeyh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrNSkudG9TdHJpbmcoMTApfTtcXG4gICAgICAgICAgICB3aWR0aDogJHtpfXB4O1xcbiAgICAgICAgICAgIGhlaWdodDogJHt0LmhlaWdodH1weDtcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5KmUvMTAwfSkgNSUsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgMCkgMTAwJSk7XFxuICAgICAgICAgICAgbGVmdDogJHt0LmxlZnQrdC53aWR0aC8yfXB4O1xcbiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDAgMDtcXG4gICAgICAgIGA7cys9MD09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPjEwMHx8MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCkmJnRoaXMuc2hhZG93LnByb2dyZXNzPD0xMDA/XCJ0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDAsIDAsIDApO1wiOlwidHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKSByb3RhdGVZKDE4MGRlZyk7XCIsdGhpcy5oYXJkSW5uZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1zfWRyYXdIYXJkT3V0ZXJTaGFkb3coKXtjb25zdCB0PXRoaXMuZ2V0UmVjdCgpO2xldCBlPSgxMDAtKHRoaXMuc2hhZG93LnByb2dyZXNzPjEwMD8yMDAtdGhpcy5zaGFkb3cucHJvZ3Jlc3M6dGhpcy5zaGFkb3cucHJvZ3Jlc3MpKSooMi41KnQucGFnZVdpZHRoKS8xMDArMjA7ZT50LnBhZ2VXaWR0aCYmKGU9dC5wYWdlV2lkdGgpO2xldCBpPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAkeyh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrNCkudG9TdHJpbmcoMTApfTtcXG4gICAgICAgICAgICB3aWR0aDogJHtlfXB4O1xcbiAgICAgICAgICAgIGhlaWdodDogJHt0LmhlaWdodH1weDtcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gbGVmdCwgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHl9KSA1JSwgcmdiYSgwLCAwLCAwLCAwKSAxMDAlKTtcXG4gICAgICAgICAgICBsZWZ0OiAke3QubGVmdCt0LndpZHRoLzJ9cHg7XFxuICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogMCAwO1xcbiAgICAgICAgYDtpKz0wPT09dGhpcy5nZXREaXJlY3Rpb24oKSYmdGhpcy5zaGFkb3cucHJvZ3Jlc3M+MTAwfHwxPT09dGhpcy5nZXREaXJlY3Rpb24oKSYmdGhpcy5zaGFkb3cucHJvZ3Jlc3M8PTEwMD9cInRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgMCwgMCkgcm90YXRlWSgxODBkZWcpO1wiOlwidHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcIix0aGlzLmhhcmRTaGFkb3cuc3R5bGUuY3NzVGV4dD1pfWRyYXdJbm5lclNoYWRvdygpe2NvbnN0IHQ9dGhpcy5nZXRSZWN0KCksZT0zKnRoaXMuc2hhZG93LndpZHRoLzQsaT0wPT09dGhpcy5nZXREaXJlY3Rpb24oKT9lOjAscz0wPT09dGhpcy5nZXREaXJlY3Rpb24oKT9cInRvIGxlZnRcIjpcInRvIHJpZ2h0XCIsbj10aGlzLmNvbnZlcnRUb0dsb2JhbCh0aGlzLnNoYWRvdy5wb3MpLHI9dGhpcy5zaGFkb3cuYW5nbGUrMypNYXRoLlBJLzIsbz1bdGhpcy5wYWdlUmVjdC50b3BMZWZ0LHRoaXMucGFnZVJlY3QudG9wUmlnaHQsdGhpcy5wYWdlUmVjdC5ib3R0b21SaWdodCx0aGlzLnBhZ2VSZWN0LmJvdHRvbUxlZnRdO2xldCBhPVwicG9seWdvbiggXCI7Zm9yKGNvbnN0IHQgb2Ygbyl7bGV0IGU9MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/e3g6LXQueCt0aGlzLnNoYWRvdy5wb3MueCx5OnQueS10aGlzLnNoYWRvdy5wb3MueX06e3g6dC54LXRoaXMuc2hhZG93LnBvcy54LHk6dC55LXRoaXMuc2hhZG93LnBvcy55fTtlPWguR2V0Um90YXRlZFBvaW50KGUse3g6aSx5OjEwMH0sciksYSs9ZS54K1wicHggXCIrZS55K1wicHgsIFwifWE9YS5zbGljZSgwLC0yKSxhKz1cIilcIjtjb25zdCBnPWBcXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcXG4gICAgICAgICAgICB6LWluZGV4OiAkeyh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrMTApLnRvU3RyaW5nKDEwKX07XFxuICAgICAgICAgICAgd2lkdGg6ICR7ZX1weDtcXG4gICAgICAgICAgICBoZWlnaHQ6ICR7Mip0LmhlaWdodH1weDtcXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoJHtzfSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAke3RoaXMuc2hhZG93Lm9wYWNpdHl9KSA1JSxcXG4gICAgICAgICAgICAgICAgcmdiYSgwLCAwLCAwLCAwLjA1KSAxNSUsXFxuICAgICAgICAgICAgICAgIHJnYmEoMCwgMCwgMCwgJHt0aGlzLnNoYWRvdy5vcGFjaXR5fSkgMzUlLFxcbiAgICAgICAgICAgICAgICByZ2JhKDAsIDAsIDAsIDApIDEwMCUpO1xcbiAgICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR7aX1weCAxMDBweDtcXG4gICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKCR7bi54LWl9cHgsICR7bi55LTEwMH1weCwgMCkgcm90YXRlKCR7cn1yYWQpO1xcbiAgICAgICAgICAgIGNsaXAtcGF0aDogJHthfTtcXG4gICAgICAgICAgICAtd2Via2l0LWNsaXAtcGF0aDogJHthfTtcXG4gICAgICAgIGA7dGhpcy5pbm5lclNoYWRvdy5zdHlsZS5jc3NUZXh0PWd9ZHJhd091dGVyU2hhZG93KCl7Y29uc3QgdD10aGlzLmdldFJlY3QoKSxlPXRoaXMuY29udmVydFRvR2xvYmFsKHt4OnRoaXMuc2hhZG93LnBvcy54LHk6dGhpcy5zaGFkb3cucG9zLnl9KSxpPXRoaXMuc2hhZG93LmFuZ2xlKzMqTWF0aC5QSS8yLHM9MT09PXRoaXMuZ2V0RGlyZWN0aW9uKCk/dGhpcy5zaGFkb3cud2lkdGg6MCxuPTA9PT10aGlzLmdldERpcmVjdGlvbigpP1widG8gcmlnaHRcIjpcInRvIGxlZnRcIixyPVt7eDowLHk6MH0se3g6dC5wYWdlV2lkdGgseTowfSx7eDp0LnBhZ2VXaWR0aCx5OnQuaGVpZ2h0fSx7eDowLHk6dC5oZWlnaHR9XTtsZXQgbz1cInBvbHlnb24oIFwiO2Zvcihjb25zdCB0IG9mIHIpaWYobnVsbCE9PXQpe2xldCBlPTE9PT10aGlzLmdldERpcmVjdGlvbigpP3t4Oi10LngrdGhpcy5zaGFkb3cucG9zLngseTp0LnktdGhpcy5zaGFkb3cucG9zLnl9Ont4OnQueC10aGlzLnNoYWRvdy5wb3MueCx5OnQueS10aGlzLnNoYWRvdy5wb3MueX07ZT1oLkdldFJvdGF0ZWRQb2ludChlLHt4OnMseToxMDB9LGkpLG8rPWUueCtcInB4IFwiK2UueStcInB4LCBcIn1vPW8uc2xpY2UoMCwtMiksbys9XCIpXCI7Y29uc3QgYT1gXFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7XFxuICAgICAgICAgICAgei1pbmRleDogJHsodGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzEwKS50b1N0cmluZygxMCl9O1xcbiAgICAgICAgICAgIHdpZHRoOiAke3RoaXMuc2hhZG93LndpZHRofXB4O1xcbiAgICAgICAgICAgIGhlaWdodDogJHsyKnQuaGVpZ2h0fXB4O1xcbiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgke259LCByZ2JhKDAsIDAsIDAsICR7dGhpcy5zaGFkb3cub3BhY2l0eX0pLCByZ2JhKDAsIDAsIDAsIDApKTtcXG4gICAgICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAke3N9cHggMTAwcHg7XFxuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgke2UueC1zfXB4LCAke2UueS0xMDB9cHgsIDApIHJvdGF0ZSgke2l9cmFkKTtcXG4gICAgICAgICAgICBjbGlwLXBhdGg6ICR7b307XFxuICAgICAgICAgICAgLXdlYmtpdC1jbGlwLXBhdGg6ICR7b307XFxuICAgICAgICBgO3RoaXMub3V0ZXJTaGFkb3cuc3R5bGUuY3NzVGV4dD1hfWRyYXdMZWZ0UGFnZSgpe1wicG9ydHJhaXRcIiE9PXRoaXMub3JpZW50YXRpb24mJm51bGwhPT10aGlzLmxlZnRQYWdlJiYoMT09PXRoaXMuZGlyZWN0aW9uJiZudWxsIT09dGhpcy5mbGlwcGluZ1BhZ2UmJlwiaGFyZFwiPT09dGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKT8odGhpcy5sZWZ0UGFnZS5nZXRFbGVtZW50KCkuc3R5bGUuekluZGV4PSh0aGlzLmdldFNldHRpbmdzKCkuc3RhcnRaSW5kZXgrNSkudG9TdHJpbmcoMTApLHRoaXMubGVmdFBhZ2Uuc2V0SGFyZERyYXdpbmdBbmdsZSgxODArdGhpcy5mbGlwcGluZ1BhZ2UuZ2V0SGFyZEFuZ2xlKCkpLHRoaXMubGVmdFBhZ2UuZHJhdyh0aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpKSk6dGhpcy5sZWZ0UGFnZS5zaW1wbGVEcmF3KDApKX1kcmF3UmlnaHRQYWdlKCl7bnVsbCE9PXRoaXMucmlnaHRQYWdlJiYoMD09PXRoaXMuZGlyZWN0aW9uJiZudWxsIT09dGhpcy5mbGlwcGluZ1BhZ2UmJlwiaGFyZFwiPT09dGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RHJhd2luZ0RlbnNpdHkoKT8odGhpcy5yaWdodFBhZ2UuZ2V0RWxlbWVudCgpLnN0eWxlLnpJbmRleD0odGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKSx0aGlzLnJpZ2h0UGFnZS5zZXRIYXJkRHJhd2luZ0FuZ2xlKDE4MCt0aGlzLmZsaXBwaW5nUGFnZS5nZXRIYXJkQW5nbGUoKSksdGhpcy5yaWdodFBhZ2UuZHJhdyh0aGlzLmZsaXBwaW5nUGFnZS5nZXREcmF3aW5nRGVuc2l0eSgpKSk6dGhpcy5yaWdodFBhZ2Uuc2ltcGxlRHJhdygxKSl9ZHJhd0JvdHRvbVBhZ2UoKXtpZihudWxsPT09dGhpcy5ib3R0b21QYWdlKXJldHVybjtjb25zdCB0PW51bGwhPXRoaXMuZmxpcHBpbmdQYWdlP3RoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk6bnVsbDtcInBvcnRyYWl0XCI9PT10aGlzLm9yaWVudGF0aW9uJiYxPT09dGhpcy5kaXJlY3Rpb258fCh0aGlzLmJvdHRvbVBhZ2UuZ2V0RWxlbWVudCgpLnN0eWxlLnpJbmRleD0odGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzMpLnRvU3RyaW5nKDEwKSx0aGlzLmJvdHRvbVBhZ2UuZHJhdyh0KSl9ZHJhd0ZyYW1lKCl7dGhpcy5jbGVhcigpLHRoaXMuZHJhd0xlZnRQYWdlKCksdGhpcy5kcmF3UmlnaHRQYWdlKCksdGhpcy5kcmF3Qm90dG9tUGFnZSgpLG51bGwhPXRoaXMuZmxpcHBpbmdQYWdlJiYodGhpcy5mbGlwcGluZ1BhZ2UuZ2V0RWxlbWVudCgpLnN0eWxlLnpJbmRleD0odGhpcy5nZXRTZXR0aW5ncygpLnN0YXJ0WkluZGV4KzUpLnRvU3RyaW5nKDEwKSx0aGlzLmZsaXBwaW5nUGFnZS5kcmF3KCkpLG51bGwhPXRoaXMuc2hhZG93JiZudWxsIT09dGhpcy5mbGlwcGluZ1BhZ2UmJihcInNvZnRcIj09PXRoaXMuZmxpcHBpbmdQYWdlLmdldERyYXdpbmdEZW5zaXR5KCk/KHRoaXMuZHJhd091dGVyU2hhZG93KCksdGhpcy5kcmF3SW5uZXJTaGFkb3coKSk6KHRoaXMuZHJhd0hhcmRPdXRlclNoYWRvdygpLHRoaXMuZHJhd0hhcmRJbm5lclNoYWRvdygpKSl9Y2xlYXIoKXtmb3IoY29uc3QgdCBvZiB0aGlzLmFwcC5nZXRQYWdlQ29sbGVjdGlvbigpLmdldFBhZ2VzKCkpdCE9PXRoaXMubGVmdFBhZ2UmJnQhPT10aGlzLnJpZ2h0UGFnZSYmdCE9PXRoaXMuZmxpcHBpbmdQYWdlJiZ0IT09dGhpcy5ib3R0b21QYWdlJiYodC5nZXRFbGVtZW50KCkuc3R5bGUuY3NzVGV4dD1cImRpc3BsYXk6IG5vbmVcIiksdC5nZXRUZW1wb3JhcnlDb3B5KCkhPT10aGlzLmZsaXBwaW5nUGFnZSYmdC5oaWRlVGVtcG9yYXJ5Q29weSgpfXVwZGF0ZSgpe3N1cGVyLnVwZGF0ZSgpLG51bGwhPT10aGlzLnJpZ2h0UGFnZSYmdGhpcy5yaWdodFBhZ2Uuc2V0T3JpZW50YXRpb24oMSksbnVsbCE9PXRoaXMubGVmdFBhZ2UmJnRoaXMubGVmdFBhZ2Uuc2V0T3JpZW50YXRpb24oMCl9fWNsYXNzIHh7Y29uc3RydWN0b3IoKXt0aGlzLl9kZWZhdWx0PXtzdGFydFBhZ2U6MCxzaXplOlwiZml4ZWRcIix3aWR0aDowLGhlaWdodDowLG1pbldpZHRoOjAsbWF4V2lkdGg6MCxtaW5IZWlnaHQ6MCxtYXhIZWlnaHQ6MCxkcmF3U2hhZG93OiEwLGZsaXBwaW5nVGltZToxZTMsdXNlUG9ydHJhaXQ6ITAsc3RhcnRaSW5kZXg6MCxhdXRvU2l6ZTohMCxtYXhTaGFkb3dPcGFjaXR5OjEsc2hvd0NvdmVyOiExLG1vYmlsZVNjcm9sbFN1cHBvcnQ6ITAsc3dpcGVEaXN0YW5jZTozMCxjbGlja0V2ZW50Rm9yd2FyZDohMCx1c2VNb3VzZUV2ZW50czohMCxzaG93UGFnZUNvcm5lcnM6ITAsZGlzYWJsZUZsaXBCeUNsaWNrOiExfX1nZXRTZXR0aW5ncyh0KXtjb25zdCBlPXRoaXMuX2RlZmF1bHQ7aWYoT2JqZWN0LmFzc2lnbihlLHQpLFwic3RyZXRjaFwiIT09ZS5zaXplJiZcImZpeGVkXCIhPT1lLnNpemUpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHNpemUgdHlwZS4gQXZhaWxhYmxlIG9ubHkgXCJmaXhlZFwiIGFuZCBcInN0cmV0Y2hcIiB2YWx1ZScpO2lmKGUud2lkdGg8PTB8fGUuaGVpZ2h0PD0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgd2lkdGggb3IgaGVpZ2h0XCIpO2lmKGUuZmxpcHBpbmdUaW1lPD0wKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZmxpcHBpbmcgdGltZVwiKTtyZXR1cm5cInN0cmV0Y2hcIj09PWUuc2l6ZT8oZS5taW5XaWR0aDw9MCYmKGUubWluV2lkdGg9MTAwKSxlLm1heFdpZHRoPGUubWluV2lkdGgmJihlLm1heFdpZHRoPTJlMyksZS5taW5IZWlnaHQ8PTAmJihlLm1pbkhlaWdodD0xMDApLGUubWF4SGVpZ2h0PGUubWluSGVpZ2h0JiYoZS5tYXhIZWlnaHQ9MmUzKSk6KGUubWluV2lkdGg9ZS53aWR0aCxlLm1heFdpZHRoPWUud2lkdGgsZS5taW5IZWlnaHQ9ZS5oZWlnaHQsZS5tYXhIZWlnaHQ9ZS5oZWlnaHQpLGV9fSFmdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPXt9KTt2YXIgaT1lLmluc2VydEF0O2lmKHQmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCl7dmFyIHM9ZG9jdW1lbnQuaGVhZHx8ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO24udHlwZT1cInRleHQvY3NzXCIsXCJ0b3BcIj09PWkmJnMuZmlyc3RDaGlsZD9zLmluc2VydEJlZm9yZShuLHMuZmlyc3RDaGlsZCk6cy5hcHBlbmRDaGlsZChuKSxuLnN0eWxlU2hlZXQ/bi5zdHlsZVNoZWV0LmNzc1RleHQ9dDpuLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHQpKX19KFwiLnN0Zl9fcGFyZW50IHtcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcXG5cXG4gIC1tcy10b3VjaC1hY3Rpb246IHBhbi15O1xcbiAgdG91Y2gtYWN0aW9uOiBwYW4teTtcXG59XFxuXFxuLnNmdF9fd3JhcHBlciB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxufVxcblxcbi5zdGZfX3BhcmVudCBjYW52YXMge1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uc3RmX19ibG9jayB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBwZXJzcGVjdGl2ZTogMjAwMHB4O1xcbn1cXG5cXG4uc3RmX19pdGVtIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0cmFuc2Zvcm0tc3R5bGU6IHByZXNlcnZlLTNkO1xcbn1cXG5cXG4uc3RmX19vdXRlclNoYWRvdyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uc3RmX19pbm5lclNoYWRvdyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cXG5cXG4uc3RmX19oYXJkU2hhZG93IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxufVxcblxcbi5zdGZfX2hhcmRJbm5lclNoYWRvdyB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAwO1xcbiAgdG9wOiAwO1xcbn1cIik7dC5QYWdlRmxpcD1jbGFzcyBleHRlbmRzIGNsYXNze2NvbnN0cnVjdG9yKCl7dGhpcy5ldmVudHM9bmV3IE1hcH1vbih0LGUpe3JldHVybiB0aGlzLmV2ZW50cy5oYXModCk/dGhpcy5ldmVudHMuZ2V0KHQpLnB1c2goZSk6dGhpcy5ldmVudHMuc2V0KHQsW2VdKSx0aGlzfW9mZih0KXt0aGlzLmV2ZW50cy5kZWxldGUodCl9dHJpZ2dlcih0LGUsaT1udWxsKXtpZih0aGlzLmV2ZW50cy5oYXModCkpZm9yKGNvbnN0IHMgb2YgdGhpcy5ldmVudHMuZ2V0KHQpKXMoe2RhdGE6aSxvYmplY3Q6ZX0pfX17Y29uc3RydWN0b3IodCxlKXtzdXBlcigpLHRoaXMuaXNVc2VyVG91Y2g9ITEsdGhpcy5pc1VzZXJNb3ZlPSExLHRoaXMuc2V0dGluZz1udWxsLHRoaXMucGFnZXM9bnVsbCx0aGlzLnNldHRpbmc9KG5ldyB4KS5nZXRTZXR0aW5ncyhlKSx0aGlzLmJsb2NrPXR9ZGVzdHJveSgpe3RoaXMudWkuZGVzdHJveSgpLHRoaXMuYmxvY2sucmVtb3ZlKCl9dXBkYXRlKCl7dGhpcy5yZW5kZXIudXBkYXRlKCksdGhpcy5wYWdlcy5zaG93KCl9bG9hZEZyb21JbWFnZXModCl7dGhpcy51aT1uZXcgdSh0aGlzLmJsb2NrLHRoaXMsdGhpcy5zZXR0aW5nKTtjb25zdCBlPXRoaXMudWkuZ2V0Q2FudmFzKCk7dGhpcy5yZW5kZXI9bmV3IGQodGhpcyx0aGlzLnNldHRpbmcsZSksdGhpcy5mbGlwQ29udHJvbGxlcj1uZXcgZyh0aGlzLnJlbmRlcix0aGlzKSx0aGlzLnBhZ2VzPW5ldyBuKHRoaXMsdGhpcy5yZW5kZXIsdCksdGhpcy5wYWdlcy5sb2FkKCksdGhpcy5yZW5kZXIuc3RhcnQoKSx0aGlzLnBhZ2VzLnNob3codGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSksc2V0VGltZW91dCgoKT0+e3RoaXMudWkudXBkYXRlKCksdGhpcy50cmlnZ2VyKFwiaW5pdFwiLHRoaXMse3BhZ2U6dGhpcy5zZXR0aW5nLnN0YXJ0UGFnZSxtb2RlOnRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9KX0sMSl9bG9hZEZyb21IVE1MKHQpe3RoaXMudWk9bmV3IGModGhpcy5ibG9jayx0aGlzLHRoaXMuc2V0dGluZyx0KSx0aGlzLnJlbmRlcj1uZXcgdyh0aGlzLHRoaXMuc2V0dGluZyx0aGlzLnVpLmdldERpc3RFbGVtZW50KCkpLHRoaXMuZmxpcENvbnRyb2xsZXI9bmV3IGcodGhpcy5yZW5kZXIsdGhpcyksdGhpcy5wYWdlcz1uZXcgbyh0aGlzLHRoaXMucmVuZGVyLHRoaXMudWkuZ2V0RGlzdEVsZW1lbnQoKSx0KSx0aGlzLnBhZ2VzLmxvYWQoKSx0aGlzLnJlbmRlci5zdGFydCgpLHRoaXMucGFnZXMuc2hvdyh0aGlzLnNldHRpbmcuc3RhcnRQYWdlKSxzZXRUaW1lb3V0KCgpPT57dGhpcy51aS51cGRhdGUoKSx0aGlzLnRyaWdnZXIoXCJpbml0XCIsdGhpcyx7cGFnZTp0aGlzLnNldHRpbmcuc3RhcnRQYWdlLG1vZGU6dGhpcy5yZW5kZXIuZ2V0T3JpZW50YXRpb24oKX0pfSwxKX11cGRhdGVGcm9tSW1hZ2VzKHQpe2NvbnN0IGU9dGhpcy5wYWdlcy5nZXRDdXJyZW50UGFnZUluZGV4KCk7dGhpcy5wYWdlcy5kZXN0cm95KCksdGhpcy5wYWdlcz1uZXcgbih0aGlzLHRoaXMucmVuZGVyLHQpLHRoaXMucGFnZXMubG9hZCgpLHRoaXMucGFnZXMuc2hvdyhlKSx0aGlzLnRyaWdnZXIoXCJ1cGRhdGVcIix0aGlzLHtwYWdlOmUsbW9kZTp0aGlzLnJlbmRlci5nZXRPcmllbnRhdGlvbigpfSl9dXBkYXRlRnJvbUh0bWwodCl7Y29uc3QgZT10aGlzLnBhZ2VzLmdldEN1cnJlbnRQYWdlSW5kZXgoKTt0aGlzLnBhZ2VzLmRlc3Ryb3koKSx0aGlzLnBhZ2VzPW5ldyBvKHRoaXMsdGhpcy5yZW5kZXIsdGhpcy51aS5nZXREaXN0RWxlbWVudCgpLHQpLHRoaXMucGFnZXMubG9hZCgpLHRoaXMudWkudXBkYXRlSXRlbXModCksdGhpcy5yZW5kZXIucmVsb2FkKCksdGhpcy5wYWdlcy5zaG93KGUpLHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiLHRoaXMse3BhZ2U6ZSxtb2RlOnRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9KX1jbGVhcigpe3RoaXMucGFnZXMuZGVzdHJveSgpLHRoaXMudWkuY2xlYXIoKX10dXJuVG9QcmV2UGFnZSgpe3RoaXMucGFnZXMuc2hvd1ByZXYoKX10dXJuVG9OZXh0UGFnZSgpe3RoaXMucGFnZXMuc2hvd05leHQoKX10dXJuVG9QYWdlKHQpe3RoaXMucGFnZXMuc2hvdyh0KX1mbGlwTmV4dCh0PVwidG9wXCIpe3RoaXMuZmxpcENvbnRyb2xsZXIuZmxpcE5leHQodCl9ZmxpcFByZXYodD1cInRvcFwiKXt0aGlzLmZsaXBDb250cm9sbGVyLmZsaXBQcmV2KHQpfWZsaXAodCxlPVwidG9wXCIpe3RoaXMuZmxpcENvbnRyb2xsZXIuZmxpcFRvUGFnZSh0LGUpfXVwZGF0ZVN0YXRlKHQpe3RoaXMudHJpZ2dlcihcImNoYW5nZVN0YXRlXCIsdGhpcyx0KX11cGRhdGVQYWdlSW5kZXgodCl7dGhpcy50cmlnZ2VyKFwiZmxpcFwiLHRoaXMsdCl9dXBkYXRlT3JpZW50YXRpb24odCl7dGhpcy51aS5zZXRPcmllbnRhdGlvblN0eWxlKHQpLHRoaXMudXBkYXRlKCksdGhpcy50cmlnZ2VyKFwiY2hhbmdlT3JpZW50YXRpb25cIix0aGlzLHQpfWdldFBhZ2VDb3VudCgpe3JldHVybiB0aGlzLnBhZ2VzLmdldFBhZ2VDb3VudCgpfWdldEN1cnJlbnRQYWdlSW5kZXgoKXtyZXR1cm4gdGhpcy5wYWdlcy5nZXRDdXJyZW50UGFnZUluZGV4KCl9Z2V0UGFnZSh0KXtyZXR1cm4gdGhpcy5wYWdlcy5nZXRQYWdlKHQpfWdldFJlbmRlcigpe3JldHVybiB0aGlzLnJlbmRlcn1nZXRGbGlwQ29udHJvbGxlcigpe3JldHVybiB0aGlzLmZsaXBDb250cm9sbGVyfWdldE9yaWVudGF0aW9uKCl7cmV0dXJuIHRoaXMucmVuZGVyLmdldE9yaWVudGF0aW9uKCl9Z2V0Qm91bmRzUmVjdCgpe3JldHVybiB0aGlzLnJlbmRlci5nZXRSZWN0KCl9Z2V0U2V0dGluZ3MoKXtyZXR1cm4gdGhpcy5zZXR0aW5nfWdldFVJKCl7cmV0dXJuIHRoaXMudWl9Z2V0U3RhdGUoKXtyZXR1cm4gdGhpcy5mbGlwQ29udHJvbGxlci5nZXRTdGF0ZSgpfWdldFBhZ2VDb2xsZWN0aW9uKCl7cmV0dXJuIHRoaXMucGFnZXN9c3RhcnRVc2VyVG91Y2godCl7dGhpcy5tb3VzZVBvc2l0aW9uPXQsdGhpcy5pc1VzZXJUb3VjaD0hMCx0aGlzLmlzVXNlck1vdmU9ITF9dXNlck1vdmUodCxlKXt0aGlzLmlzVXNlclRvdWNofHxlfHwhdGhpcy5zZXR0aW5nLnNob3dQYWdlQ29ybmVycz90aGlzLmlzVXNlclRvdWNoJiZoLkdldERpc3RhbmNlQmV0d2VlblR3b1BvaW50KHRoaXMubW91c2VQb3NpdGlvbix0KT41JiYodGhpcy5pc1VzZXJNb3ZlPSEwLHRoaXMuZmxpcENvbnRyb2xsZXIuZm9sZCh0KSk6dGhpcy5mbGlwQ29udHJvbGxlci5zaG93Q29ybmVyKHQpfXVzZXJTdG9wKHQsZT0hMSl7dGhpcy5pc1VzZXJUb3VjaCYmKHRoaXMuaXNVc2VyVG91Y2g9ITEsZXx8KHRoaXMuaXNVc2VyTW92ZT90aGlzLmZsaXBDb250cm9sbGVyLnN0b3BNb3ZlKCk6dGhpcy5mbGlwQ29udHJvbGxlci5mbGlwKHQpKSl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0pKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/page-flip/dist/js/page-flip.browser.js\n");

/***/ })

};
;